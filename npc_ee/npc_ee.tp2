BACKUP ~npc_ee/backup~
AUTHOR ~SubtleD~

VERSION ~v1.0~
README ~npc_ee/readme-npc-rekit.html~

ALWAYS

	INCLUDE ~npc_ee/lib/alter_effect.tpa~

	INCLUDE ~npc_ee/lib/delete_effect.tpa~

	INCLUDE ~npc_ee/lib/remove_lines.tpa~

	INCLUDE ~npc_ee/lib/spell_to_innate.tpa~

	INCLUDE ~npc_ee/lib/fl#add_kit_ee.tpa~

END

LANGUAGE
  ~English~
  ~english~
  ~npc_ee/language/english/setup.tra~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							IMOEN
//__________________________________________________________________________________
//__________________________________________________________________________________

// SWASHBUCKLER

BEGIN @101
DESIGNATED 101
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee tob bg2ee~ ~Imoen~
SUBCOMPONENT @100

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_SWASH.2da~ THEN BEGIN

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1 //sets level to 1
		WRITE_SHORT 0x0236 1 //sets level to 1
		WRITE_BYTE 0x0045 10 // hide in shadows
		WRITE_BYTE 0x0064 5  // detect illusion
		WRITE_BYTE 0x0065 5  // set traps
		WRITE_BYTE 0x0066 10 // lore
		WRITE_BYTE 0x0067 5  // open locks
		WRITE_BYTE 0x0068 10 // move silently
		WRITE_BYTE 0x0069 5  // find traps
		WRITE_BYTE 0x006a 5  // pick pockets
		WRITE_SHORT 0x244 0  // first part of kit designation
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_SHORT 0x0024 10 // hit points
		WRITE_SHORT 0x0026 10 // max hit points
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
END

ACTION_IF GAME_IS ~tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_BYTE 0x247 0x40
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
END

END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	COPY_EXISTING ~kitlist.2da~ ~override~
		COUNT_2DA_ROWS 8 "rows"
		FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
			READ_2DA_ENTRY "%index%" 5 8 "clab"
				PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_swash" = 1) BEGIN
			SET "d5_swash" = "%index%"-1
			SET "rows" = 0
			END
		END

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_SWASH~ END
END

ACTION_IF GAME_IS ~tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_SWASH~ END
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_swash~ END
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_BYTE 0x247 0x40
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_swash~ END
END

END
//__________________________________________________________________________________

// SPELLFILCHER

BEGIN @102
DESIGNATED 102
SUBCOMPONENT @100 // (FILE_EXISTS_IN_GAME ~d5_filch.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_filch.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/spellfilcher/spellfilcher.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_FILCH" = 1) BEGIN
		SET "d5_FILCH" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 13 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		READ_BYTE 0x11 rdual 
		WRITE_BYTE 0x10 (rdual BAND 0b11111110) // uncheck ranger dual-class flag
		READ_BYTE 0x10 dual 
		WRITE_BYTE 0x10 (dual BAND 0b00000111) // uncheck other dual-class flags
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FILCH%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_flch1~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 91 1
	END
END

ACTION_IF GAME_IS ~tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_BYTE 0x246 ~%d5_FILCH%~ // changes kit
		WRITE_BYTE 0x247 0x40
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_flch1~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_flch2~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_flch3~ END
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 13 // sets class
		WRITE_BYTE 0x272 3 // half-elf
// switch from dual-class to multiclass
		READ_BYTE 0x11 rdual 
		WRITE_BYTE 0x10 (rdual BAND 0b11111110) // uncheck ranger dual-class flag
		READ_BYTE 0x10 dual 
		WRITE_BYTE 0x10 (dual BAND 0b00000111) // uncheck other dual-class flags
//
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FILCH%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_flch1~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 91 1
	END
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_BYTE 0x246 ~%d5_FILCH%~ // changes kit
		WRITE_BYTE 0x247 0x40
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_flch1~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_flch2~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_flch3~ END
END
//__________________________________________________________________________________

// ADVENTURER

BEGIN @103
DESIGNATED 103
SUBCOMPONENT @100 (FILE_EXISTS_IN_GAME ~a!av.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "a!av" = 1) BEGIN
		SET "a!av" = "%index%"-1
		SET "rows" = 0
		END
	END

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a!av%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN6.cre~ ~override~
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 91 1
	END
END

ACTION_IF GAME_IS ~tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a!av%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a!av%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~IMOEN1.cre~ ~override~
				~IMOEN2.cre~ ~override~
				~IMOEN4.cre~ ~override~
				~IMOEN61.cre~ ~override~
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 91 1
	END
	COPY_EXISTING ~IMOEN6.cre~ ~override~
				~IMOEN10.cre~ ~override~
				~IMOEN15.cre~ ~override~
				~IMOEN211.cre~ ~override~
				~IMOEN213.cre~ ~override~
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a!av%~ // changes kit
		WRITE_BYTE 0x247 0x40
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_swash~ END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @119
DESIGNATED 119
SUBCOMPONENT @100

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							JAHEIRA
//__________________________________________________________________________________
//__________________________________________________________________________________

// TOTEMIC

BEGIN @121
DESIGNATED 121
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee tob bg2ee~ ~Jaheira~
SUBCOMPONENT @120

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 11 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x10 // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl621~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 93 1
	END
END

ACTION_IF GAME_IS ~tob bgt bg2ee~ THEN BEGIN
	COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 11 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x10 // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl621~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 93 1
	END
END

//__________________________________________________________________________________

// ELEMENTALIST

BEGIN @122
DESIGNATED 122
SUBCOMPONENT @120 // (FILE_EXISTS_IN_GAME ~d5_eleme.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_eleme.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/elementalist/elementalist.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_eleme" = 1) BEGIN
		SET "d5_eleme" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 11 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_eleme%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl621~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
	END
END

ACTION_IF GAME_IS ~tob bgt bg2ee~ THEN BEGIN
	COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 11 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_eleme%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl621~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
	END
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @138
DESIGNATED 138
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee tob bg2ee~ ~Jaheira~
SUBCOMPONENT @120

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~jaheir.cre~ ~override~
				~jaheir2.cre~ ~override~
				~jaheir4.cre~ ~override~
				~jaheir6.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 93 1
	END
END

ACTION_IF GAME_IS ~tob bgt bg2ee~ THEN BEGIN
	COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~jaheir7.cre~ ~override~
				~jaheir8.cre~ ~override~
				~jaheir11.cre~ ~override~
				~jaheir12.cre~ ~override~
				~jahei12b.cre~ ~override~
				~jahei14.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 93 1
	END
END

//__________________________________________________________________________________

// NO CHANGE

BEGIN @139
DESIGNATED 139
SUBCOMPONENT @120

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							KHALID
//__________________________________________________________________________________
//__________________________________________________________________________________

// RANGER/CLERIC

BEGIN @141
DESIGNATED 141
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) OR (FILE_EXISTS_IN_GAME ~zikhalid.cre.2da~) ~Khalid~
SUBCOMPONENT @140

ACTION_IF FILE_EXISTS_IN_GAME ~d5_mieli.2da~ THEN BEGIN

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_mieli" = 1) BEGIN
		SET "d5_mieli" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~khalid.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 18 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_BYTE 0x23a 11
		WRITE_BYTE 0x23b 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_mieli%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		ADD_CRE_ITEM ~staf01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP TWOHANDED
		ADD_CRE_ITEM ~slng02~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~
		ADD_CRE_ITEM ~bull01~ #40 #0 #0 ~IDENTIFIED~ ~quiver1~
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 18 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_BYTE 0x23a 11
		WRITE_BYTE 0x23b 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_mieli%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		ADD_CRE_ITEM ~staf01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP TWOHANDED
		ADD_CRE_ITEM ~slng02~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~
		ADD_CRE_ITEM ~bull01~ #40 #0 #0 ~IDENTIFIED~ ~quiver1~
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
	END
END

END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_mieli.2da~ THEN BEGIN

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~khalid.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 18 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_BYTE 0x23a 11
		WRITE_BYTE 0x23b 15
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		ADD_CRE_ITEM ~staf01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP TWOHANDED
		ADD_CRE_ITEM ~slng02~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~
		ADD_CRE_ITEM ~bull01~ #40 #0 #0 ~IDENTIFIED~ ~quiver1~
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 18 // sets class
		WRITE_BYTE 0x272 3 // half-elf
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_BYTE 0x23a 11
		WRITE_BYTE 0x23b 15
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		ADD_CRE_ITEM ~staf01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP TWOHANDED
		ADD_CRE_ITEM ~slng02~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~
		ADD_CRE_ITEM ~bull01~ #40 #0 #0 ~IDENTIFIED~ ~quiver1~
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			SET_BG2_PROFICIENCY 115 1
			SET_BG2_PROFICIENCY 102 2
			SET_BG2_PROFICIENCY 107 1
	END
END

END
//__________________________________________________________________________________

// MARKSMAN

BEGIN @141
DESIGNATED 141
SUBCOMPONENT @140 // (FILE_EXISTS_IN_GAME ~d5_marks.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_marks.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/marksman/marksman.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_marks" = 1) BEGIN
		SET "d5_marks" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~khalid.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 2 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_marks%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_arslo~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 92 1
			SET_BG2_PROFICIENCY 104 2
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 2 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_marks%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_arslo~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 92 1
			SET_BG2_PROFICIENCY 104 2
	END
END
//__________________________________________________________________________________

// JUSTIFIER

BEGIN @143
DESIGNATED 143
SUBCOMPONENT @140 (FILE_EXISTS_IN_GAME ~a#justif.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "a#justif" = 1) BEGIN
		SET "a#justif" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF FILE_EXISTS_IN_GAME ~KHALID.cre~ THEN BEGIN
	COPY_EXISTING ~KHALID.cre~ ~override~
				~KHALID2.cre~ ~override~
				~KHALID4.cre~ ~override~
				~KHALID6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#justif%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=59 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 102 1
			SET_BG2_PROFICIENCY 104 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#justif%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=59 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 102 1
			SET_BG2_PROFICIENCY 104 1
	END
END

//__________________________________________________________________________________

// CORSAIR

BEGIN @144
DESIGNATED 144
SUBCOMPONENT @140 (FILE_EXISTS_IN_GAME ~d5_corsa.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_corsa.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/corsair/corsair.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_corsa" = 1) BEGIN
		SET "d5_corsa" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~khalid.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_corsa%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_swash~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		SET_BG2_PROFICIENCY 113 1
		SET_BG2_PROFICIENCY 114 1
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 95 1
			SET_BG2_PROFICIENCY 104 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_corsa%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_swash~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		SET_BG2_PROFICIENCY 113 1
		SET_BG2_PROFICIENCY 114 1
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 95 1
			SET_BG2_PROFICIENCY 104 1
	END
END
//__________________________________________________________________________________

// HARRIER

BEGIN @157
DESIGNATED 157
SUBCOMPONENT @140 (FILE_EXISTS_IN_GAME ~d5_forun.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_FORUN" = 1) BEGIN
		SET "d5_FORUN" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF FILE_EXISTS_IN_GAME ~KHALID.cre~ THEN BEGIN
	COPY_EXISTING ~KHALID.cre~ ~override~
				~KHALID2.cre~ ~override~
				~KHALID4.cre~ ~override~
				~KHALID6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FORUN%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~SPCL412~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 102 1
			SET_BG2_PROFICIENCY 104 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FORUN%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~SPCL412~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 102 1
			SET_BG2_PROFICIENCY 104 1
	END
END

//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @158
DESIGNATED 158
SUBCOMPONENT @140

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~khalid.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 2 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~KHALID.cre~ ~override~
				~khalid2.cre~ ~override~
				~khalid4.cre~ ~override~
				~khalid6.cre~ ~override~
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 92 1
			SET_BG2_PROFICIENCY 104 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~zikhalid.cre~ THEN BEGIN
	COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 2 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_arslo~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~zikhalid.cre~ ~override~
				~zikhalid25.cre~ ~override~
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 92 1
			SET_BG2_PROFICIENCY 104 1
	END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @159
DESIGNATED 159
SUBCOMPONENT @140

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							MINSC
//__________________________________________________________________________________
//__________________________________________________________________________________

// BERSERKER

BEGIN @161
DESIGNATED 161
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee tob bg2ee~ ~Minsc~
SUBCOMPONENT @160

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 2 // fighter
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x01 // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc6.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 104 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 93 1
	END
END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 2 // fighter
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x01 // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 104 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 93 1
	END
END
//__________________________________________________________________________________

// BARBARIAN RANGER

BEGIN @163
DESIGNATED 163
SUBCOMPONENT @160 // (FILE_EXISTS_IN_GAME ~d5_rbarb.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_rbarb.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/barb_ranger/barb_ranger.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_rbarb" = 1) BEGIN
		SET "d5_rbarb" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // ranger
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_rbarb%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=292 target=1 timing=9 power=1 parameter2=1 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=145 target=1 timing=9 power=1 parameter2=1 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc6.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 104 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 93 1
	END
END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // ranger
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_rbarb%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		LPF ADD_CRE_EFFECT INT_VAR opcode=292 target=1 timing=9 power=1 parameter2=1 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=145 target=1 timing=9 power=1 parameter2=1 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 104 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 93 1
	END
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @178
DESIGNATED 178
SUBCOMPONENT @160

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~minsc.cre~ ~override~
				~minsc2.cre~ ~override~
				~minsc4.cre~ ~override~
				~minsc6.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 104 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 93 1
	END
END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~minsc7.cre~ ~override~
				~minsc8.cre~ ~override~
				~minsc9.cre~ ~override~
				~minsc10.cre~ ~override~
				~minsc12.cre~ ~override~
				~minsc14.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 104 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 93 1
	END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @179
DESIGNATED 179
SUBCOMPONENT @160

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							DYNAHEIR
//__________________________________________________________________________________
//__________________________________________________________________________________




//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							KIVAN
//__________________________________________________________________________________
//__________________________________________________________________________________

// STALKER

BEGIN @201
DESIGNATED 201
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) OR (FILE_EXISTS_IN_GAME ~p#kivan.cre~) ~Kivan~
SUBCOMPONENT @200

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 35
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 35
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x08 // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
		ADD_CRE_ITEM ~sw1h08~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=59 target=1 timing=9 power=1 parameter1=20 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=20 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 91 2
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~p#kivan.cre~ THEN BEGIN
	COPY_EXISTING ~p#kivan.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 35
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 35
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x08 // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
		ADD_CRE_ITEM ~sw1h08~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=59 target=1 timing=9 power=1 parameter1=20 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=20 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~p#kivan.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~p#kivan.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 91 2
	END
END
//__________________________________________________________________________________

// ARCHER

BEGIN @202
DESIGNATED 202
SUBCOMPONENT @200 (GAME_IS ~tutu bgt bgee~)

COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x07 // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
		SET_BG2_PROFICIENCY 114 2
		SET_BG2_PROFICIENCY 104 2
		SET_BG2_PROFICIENCY 99 1
		SET_BG2_PROFICIENCY 90 1
END

//ADD A LONG SWORD!

//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @218
DESIGNATED 218
SUBCOMPONENT @200

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 35
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 35
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~kivan.cre~ ~override~
				~kivan4.cre~ ~override~
				~kivan6.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 104 2
			SET_BG2_PROFICIENCY 99 2
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~p#kivan.cre~ THEN BEGIN
	COPY_EXISTING ~p#kivan.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 35
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 35
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~p#kivan.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~p#kivan.cre~ ~override~
			SET_BG2_PROFICIENCY 114 2
			SET_BG2_PROFICIENCY 104 2
			SET_BG2_PROFICIENCY 99 2
	END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @219
DESIGNATED 219
SUBCOMPONENT @200

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							CORAN
//__________________________________________________________________________________
//__________________________________________________________________________________

// SNIPER

BEGIN @221
DESIGNATED 221
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) OR (FILE_EXISTS_IN_GAME ~o#coran.cre~) ~Coran~
SUBCOMPONENT @220 // (FILE_EXISTS_IN_GAME ~d5_snipe.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_snipe.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/sniper/sniper.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_snipe" = 1) BEGIN
		SET "d5_snipe" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~coran.cre~ ~override~
			~coran5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_snipe%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_arslo~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~coran.cre~ ~override~
			~coran5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~coran.cre~ ~override~
			~coran5.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 90 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#coran.cre~ THEN BEGIN
	COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_snipe%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_arslo~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 90 1
	END
END
//__________________________________________________________________________________

// SCOUT

BEGIN @222
DESIGNATED 222
SUBCOMPONENT @220 (FILE_EXISTS_IN_GAME ~d5_adven.2da~)

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~coran.cre~ ~override~
				~coran5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~coran.cre~ ~override~
			~coran5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~coran.cre~ ~override~
			~coran5.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 90 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#coran.cre~ THEN BEGIN
	COPY_EXISTING ~o#coran.cre~ ~override~
				~o#cor25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 90 1
	END
END
//__________________________________________________________________________________

// SWASHBUCKLER

BEGIN @223
DESIGNATED 223
SUBCOMPONENT @220

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
		COPY_EXISTING ~coran.cre~ ~override~
				~coran5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~coran.cre~ ~override~
				~coran5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~coran.cre~ ~override~
				~coran5.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 113 1
			SET_BG2_PROFICIENCY 114 1
	END
	END
	ACTION_IF FILE_EXISTS_IN_GAME ~o#coran.cre~ THEN BEGIN
		COPY_EXISTING ~o#coran.cre~ ~override~
				~o#cor25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 113 1
			SET_BG2_PROFICIENCY 114 1
	END
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	COPY_EXISTING ~kitlist.2da~ ~override~
		COUNT_2DA_ROWS 8 "rows"
		FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
			READ_2DA_ENTRY "%index%" 5 8 "clab"
				PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_swash" = 1) BEGIN
			SET "d5_swash" = "%index%"-1
			SET "rows" = 0
			END
		END
	ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
		COPY_EXISTING ~coran.cre~ ~override~
				~coran5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_SWASH~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~coran.cre~ ~override~
				~coran5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~coran.cre~ ~override~
				~coran5.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 113 1
			SET_BG2_PROFICIENCY 114 1
	END
	END
	ACTION_IF FILE_EXISTS_IN_GAME ~o#coran.cre~ THEN BEGIN
		COPY_EXISTING ~o#coran.cre~ ~override~
				~o#cor25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		ADD_CRE_ITEM ~bow05~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_SWASH~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 90 1
			SET_BG2_PROFICIENCY 113 1
			SET_BG2_PROFICIENCY 114 1
	END
	END
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @238
DESIGNATED 238
SUBCOMPONENT @220

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~coran.cre~ ~override~
				~coran5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~coran.cre~ ~override~
			~coran5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~coran.cre~ ~override~
			~coran5.cre~ ~override~
			SET_BG2_PROFICIENCY 104 3
			SET_BG2_PROFICIENCY 90 2
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#coran.cre~ THEN BEGIN
	COPY_EXISTING ~o#coran.cre~ ~override~
				~o#cor25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~o#coran.cre~ ~override~
			~o#cor25.cre~ ~override~
			SET_BG2_PROFICIENCY 104 3
			SET_BG2_PROFICIENCY 90 2
	END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @239
DESIGNATED 239
SUBCOMPONENT @220

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							BRANWEN
//__________________________________________________________________________________
//__________________________________________________________________________________

// BATTLEGUARD

BEGIN @241
DESIGNATED 241
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) OR (FILE_EXISTS_IN_GAME ~o#bran.cre~) ~Branwen~
SUBCOMPONENT @240 (FILE_EXISTS_IN_GAME ~a#temp.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "a#temp" = 1) BEGIN
		SET "a#temp" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 8 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#temp%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 97 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#bran.cre~ THEN BEGIN
	COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 8 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#temp%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 97 1
	END
END
//__________________________________________________________________________________

// GLORYBLOOD

BEGIN @242
DESIGNATED 242
SUBCOMPONENT @240 // (FILE_EXISTS_IN_GAME ~d5_tempu.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_tempu.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/gloryblood/gloryblood.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_tempu" = 1) BEGIN
		SET "d5_tempu" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 8 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_tempu%~ // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl152~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_temp1~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 97 2
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#bran.cre~ THEN BEGIN
	COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 8 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_tempu%~ // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl152~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_temp1~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
			SET_BG2_PROFICIENCY 97 2
	END
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @258
DESIGNATED 258
SUBCOMPONENT @240

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~branwe.cre~ ~override~
				~branwe5.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 97 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#bran.cre~ THEN BEGIN
	COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~o#bran.cre~ ~override~
				~o#bran25.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 97 1
	END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @259
DESIGNATED 259
SUBCOMPONENT @240

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							SAFANA
//__________________________________________________________________________________
//__________________________________________________________________________________

// SWASHBUCKLER

BEGIN @261
DESIGNATED 261
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Safana~
SUBCOMPONENT @260

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
			SET_BG2_PROFICIENCY 106 1
			SET_BG2_PROFICIENCY 95 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	COPY_EXISTING ~kitlist.2da~ ~override~
		COUNT_2DA_ROWS 8 "rows"
		FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
			READ_2DA_ENTRY "%index%" 5 8 "clab"
				PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_swash" = 1) BEGIN
			SET "d5_swash" = "%index%"-1
			SET "rows" = 0
			END
		END
	COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_swash~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
			SET_BG2_PROFICIENCY 106 1
			SET_BG2_PROFICIENCY 95 1
	END
END
//__________________________________________________________________________________

// BOUNTY HUNTER

BEGIN @262
DESIGNATED 262
SUBCOMPONENT @260

COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0B // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~spcl414~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=277 target=1 timing=9 power=1 parameter1=15 parameter2=0 END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 95 1
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @278
DESIGNATED 278
SUBCOMPONENT @260

COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~safana.cre~ ~override~
				~safana4.cre~ ~override~
				~safana6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 95 1
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @279
DESIGNATED 279
SUBCOMPONENT @260

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							AJANTIS
//__________________________________________________________________________________
//__________________________________________________________________________________

/* 

// INQUISITOR

BEGIN @281
DESIGNATED 281
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) OR (FILE_EXISTS_IN_GAME ~c#ajan08.cre~) ~Ajantis~
SUBCOMPONENT @280

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x05 // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		WRITE_LONG 0x02a0 0x000 //removes known spells
		WRITE_LONG 0x02a4 0x000
		WRITE_LONG 0x02b0 0x000 // removes memorized spells
		WRITE_LONG 0x02b4 0x000
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
			SET_BG2_PROFICIENCY 89 2
			SET_BG2_PROFICIENCY 93 1
			SET_BG2_PROFICIENCY 104 1
	END
	COPY_EXISTING ~clabpa03.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~npc_ee/lib/inqclabbase.txt~
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_padet.spl~ THEN BEGIN
		COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl212~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl213~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl231~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl232~ END
	END
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_padet.spl~ THEN BEGIN
		COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_paora~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_padet~ END
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~c#ajan08.cre~ THEN BEGIN
	COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		WRITE_BYTE 0x0066 10
		WRITE_LONG 0x02a0 0x000 //removes known spells
		WRITE_LONG 0x02a4 0x000
		WRITE_LONG 0x02b0 0x000 // removes memorized spells
		WRITE_LONG 0x02b4 0x000
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
			SET_BG2_PROFICIENCY 89 2
			SET_BG2_PROFICIENCY 93 1
			SET_BG2_PROFICIENCY 104 1
	END
	COPY_EXISTING ~clabpa03.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~npc_ee/lib/inqclabbase.txt~
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_padet.spl~ THEN BEGIN
		COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl212~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl213~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl231~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl232~ END
	END
	ACTION_IF FILE_EXISTS_IN_GAME ~d5_padet.spl~ THEN BEGIN
		COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_paora~ END
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_padet~ END
	END
END
//__________________________________________________________________________________

*/

// CAVALIER

BEGIN @282
DESIGNATED 282
SUBCOMPONENT @280

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x04 // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
//		WRITE_LONG 0x02a0 0x000 //removes known spells
//		WRITE_LONG 0x02a4 0x000
//		WRITE_LONG 0x02b0 0x000 // removes memorized spells
//		WRITE_LONG 0x02b4 0x000
		ADD_CRE_ITEM ~sw2h01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl222~ END
	COPY_EXISTING ~clabpa02.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~npc_ee/lib/cavclabbase.txt~
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
			SET_BG2_PROFICIENCY 89 2
			SET_BG2_PROFICIENCY 93 1
			SET_BG2_PROFICIENCY 104 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~c#ajan08.cre~ THEN BEGIN
	COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x04 // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		WRITE_BYTE 0x0066 10
//		WRITE_LONG 0x02a0 0x000 //removes known spells
//		WRITE_LONG 0x02a4 0x000
//		WRITE_LONG 0x02b0 0x000 // removes memorized spells
//		WRITE_LONG 0x02b4 0x000
		ADD_CRE_ITEM ~sw2h01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl222~ END
	COPY_EXISTING ~clabpa02.2da~ ~override~
		LPM remove_blank_lines
		APPEND_FILE ~npc_ee/lib/cavclabbase.txt~
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
			SET_BG2_PROFICIENCY 89 2
			SET_BG2_PROFICIENCY 93 1
			SET_BG2_PROFICIENCY 104 1
	END
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @298
DESIGNATED 298
SUBCOMPONENT @280

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		WRITE_BYTE 0x0066 5
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~ajanti.cre~ ~override~
				~ajanti4.cre~ ~override~
				~ajanti6.cre~ ~override~
			SET_BG2_PROFICIENCY 89 2
			SET_BG2_PROFICIENCY 93 1
			SET_BG2_PROFICIENCY 104 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~c#ajan08.cre~ THEN BEGIN
	COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
		WRITE_BYTE 0x0066 5
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~c#ajan08.cre~ ~override~
				~c#ajan09.cre~ ~override~
				~c#ajan10.cre~ ~override~
				~c#ajan12.cre~ ~override~
				~c#ajan14.cre~ ~override~
				~c#ajan16.cre~ ~override~
				~c#ajatob.cre~ ~override~
			SET_BG2_PROFICIENCY 89 2
			SET_BG2_PROFICIENCY 93 1
			SET_BG2_PROFICIENCY 104 1
	END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @299
DESIGNATED 299
SUBCOMPONENT @280

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							XZAR...??
//__________________________________________________________________________________
//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							MONTARON
//__________________________________________________________________________________
//__________________________________________________________________________________

// ASSASSIN

BEGIN @321
DESIGNATED 321
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Montaron~
SUBCOMPONENT @320

COPY_EXISTING ~montar.cre~ ~override~
				~montar2.cre~ ~override~
				~montar4.cre~ ~override~
				~montar6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0A // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 7
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		ADD_CRE_ITEM ~xbow01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ TWOHANDED
		LPF ADD_CRE_EFFECT INT_VAR opcode=73 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~montar.cre~ ~override~
				~montar2.cre~ ~override~
				~montar4.cre~ ~override~
				~montar6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~montar.cre~ ~override~
				~montar2.cre~ ~override~
				~montar4.cre~ ~override~
				~montar6.cre~ ~override~
		SET_BG2_PROFICIENCY 91 2
		SET_BG2_PROFICIENCY 103 1
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @338
DESIGNATED 338
SUBCOMPONENT @320

COPY_EXISTING ~montar.cre~ ~override~
				~montar2.cre~ ~override~
				~montar4.cre~ ~override~
				~montar6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 7
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~montar.cre~ ~override~
				~montar2.cre~ ~override~
				~montar4.cre~ ~override~
				~montar6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~montar.cre~ ~override~
				~montar2.cre~ ~override~
				~montar4.cre~ ~override~
				~montar6.cre~ ~override~
		SET_BG2_PROFICIENCY 91 2
		SET_BG2_PROFICIENCY 107 2
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @339
DESIGNATED 339
SUBCOMPONENT @320

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							YESLICK
//__________________________________________________________________________________
//__________________________________________________________________________________

// ALAGHOR

BEGIN @341
DESIGNATED 341
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) ~Yeslick~
SUBCOMPONENT @340

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_alagh.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/alaghor/alaghor.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_alagh" = 1) BEGIN
		SET "d5_alagh" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~yeslic.cre~ ~override~
				~yeslic5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_alagh%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_alag1~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl907~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~yeslic.cre~ ~override~
				~yeslic5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~yeslic.cre~ ~override~
				~yeslic5.cre~ ~override~
		SET_BG2_PROFICIENCY 97 2
		SET_BG2_PROFICIENCY 107 2
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @358
DESIGNATED 358
SUBCOMPONENT @340

COPY_EXISTING ~yeslic.cre~ ~override~
				~yeslic5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		WRITE_BYTE 0x0066 10
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~yeslic.cre~ ~override~
				~yeslic5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~yeslic.cre~ ~override~
				~yeslic5.cre~ ~override~
		SET_BG2_PROFICIENCY 97 2
		SET_BG2_PROFICIENCY 107 2
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @359
DESIGNATED 359
SUBCOMPONENT @340

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							QUAYLE
//__________________________________________________________________________________
//__________________________________________________________________________________

// HOODWINKER

BEGIN @361
DESIGNATED 361
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) ~Quayle~
SUBCOMPONENT @360

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_hoodw.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/hoodwinker/hoodwinker.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_hoodw" = 1) BEGIN
		SET "d5_hoodw" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~quayle.cre~ ~override~
				~quayle4.cre~ ~override~
				~quayle6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 3 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_hoodw%~ // changes kit
//		WRITE_LONG 0x02a0 0x000 //removes known spells
//		WRITE_LONG 0x02a4 0x000
		WRITE_LONG 0x02b0 0x000 // removes memorized spells
		WRITE_LONG 0x02b4 0x000
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_lei11~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~quayle.cre~ ~override~
				~quayle4.cre~ ~override~
				~quayle6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~quayle.cre~ ~override~
				~quayle4.cre~ ~override~
				~quayle6.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 107 1
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @378
DESIGNATED 378
SUBCOMPONENT @360

COPY_EXISTING ~quayle.cre~ ~override~
				~quayle4.cre~ ~override~
				~quayle6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 7
		WRITE_SHORT 0x0026 7
		WRITE_BYTE 0x0066 10
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~quayle.cre~ ~override~
				~quayle4.cre~ ~override~
				~quayle6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~quayle.cre~ ~override~
				~quayle4.cre~ ~override~
				~quayle6.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 107 1
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @379
DESIGNATED 379
SUBCOMPONENT @360

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							FALDORN
//__________________________________________________________________________________
//__________________________________________________________________________________

// AVENGER

BEGIN @381
DESIGNATED 381
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Faldorn~
SUBCOMPONENT @380

COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x12 // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~spdr101~ END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=44 target=1 timing=9 power=1 parameter1=(-2) parameter2=0 END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=10 target=1 timing=9 power=1 parameter1=(-2) parameter2=0 END
ACTION_IF FILE_EXISTS_IN_GAME ~d5_pspid.spl~ THEN BEGIN
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_pspid~ END
END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 106 1
END
//__________________________________________________________________________________

// PURIFIER

BEGIN @382
DESIGNATED 382
SUBCOMPONENT @380 // (FILE_EXISTS_IN_GAME ~d5_purif.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_purif.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/purifier/purifier.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_purif" = 1) BEGIN
		SET "d5_purif" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_purif%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_pur11~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 106 1
END
//__________________________________________________________________________________

// LOST DRUID

BEGIN @383
DESIGNATED 383
SUBCOMPONENT @380

ACTION_IF NOT FILE_EXISTS_IN_GAME ~clabld.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/lost_druid/lost_druid.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "clabld" = 1) BEGIN
		SET "clabld" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%clabld%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~ldilmd~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 106 1
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @398
DESIGNATED 398
SUBCOMPONENT @380

COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		WRITE_BYTE 0x0066 10
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~faldor.cre~ ~override~
				~faldor5.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 106 1
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @399
DESIGNATED 399
SUBCOMPONENT @380

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							SKIE
//__________________________________________________________________________________
//__________________________________________________________________________________

// ASSASSIN

BEGIN @401
DESIGNATED 401
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Skie~
SUBCOMPONENT @400

COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0A // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 7
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=73 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 91 1
END
//__________________________________________________________________________________

// SHADOWDANCER (S&S)

BEGIN @402
DESIGNATED 402
SUBCOMPONENT @400 (FILE_EXISTS_IN_GAME ~a#shad.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "a#shad" = 1) BEGIN
		SET "a#shad" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#shad%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 7
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a#sd3~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=59 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=63 target=1 timing=9 power=1 END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 91 1
END
//__________________________________________________________________________________

// SHADOWDANCER (EE)

BEGIN @403
DESIGNATED 403
SUBCOMPONENT @400 (GAME_IS ~bgee~)

COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x21 // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 7
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a#sd3~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=59 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=34 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=35 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=36 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=37 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 91 1
END

//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @418
DESIGNATED 418
SUBCOMPONENT @400

COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 7
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~skie.cre~ ~override~
				~skie6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 91 1
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @419
DESIGNATED 419
SUBCOMPONENT @400

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							ELDOTH
//__________________________________________________________________________________
//__________________________________________________________________________________

// BLADE

BEGIN @421
DESIGNATED 421
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Eldoth~
SUBCOMPONENT @420

COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0D // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10 // lore
		WRITE_BYTE 0x006a 35  // pick pockets
		SET_BG2_PROFICIENCY 113 1
		SET_BG2_PROFICIENCY 114 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl521~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl522~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		SET_BG2_PROFICIENCY 104 1
		SET_BG2_PROFICIENCY 95 1
END
//__________________________________________________________________________________

// JONGLEUR

BEGIN @422
DESIGNATED 422
SUBCOMPONENT @420 // (FILE_EXISTS_IN_GAME ~d5_jongl.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_jongl.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/jongleur/jongleur.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_jongl" = 1) BEGIN
			SET "d5_jongl" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
//		WRITE_SHORT 0x273 xx // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_jongl%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10 // lore
		WRITE_BYTE 0x006a 35  // pick pockets
		SET_BG2_PROFICIENCY 113 1
		SET_BG2_PROFICIENCY 114 1
		ADD_CRE_ITEM ~dagg02~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~
		ADD_CRE_ITEM ~dart01~ #40 #0 #0 ~IDENTIFIED~ ~WEAPON2~
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~d5_jonsa~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 96 1
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @438
DESIGNATED 438
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Eldoth~
SUBCOMPONENT @420

COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10 // lore
		WRITE_BYTE 0x006a 20  // pick pockets
		SET_BG2_PROFICIENCY 113 1
		SET_BG2_PROFICIENCY 114 1
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~eldoth.cre~ ~override~
				~eldoth5.cre~ ~override~
		SET_BG2_PROFICIENCY 104 1
		SET_BG2_PROFICIENCY 95 1
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @439
DESIGNATED 439
SUBCOMPONENT @420

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							GARRICK
//__________________________________________________________________________________
//__________________________________________________________________________________

// GALLANT (SoB)

BEGIN @441
DESIGNATED 441
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Garrick~
SUBCOMPONENT @440 // (FILE_EXISTS_IN_GAME ~d5_galla.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_galla.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/gallant/gallant.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_galla" = 1) BEGIN
			SET "d5_galla" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_galla%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		WRITE_BYTE 0x0066 10 // lore
		WRITE_BYTE 0x006a 5  // pick pockets
		ADD_CRE_ITEM ~sw1h04~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=17 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=34 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=35 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=36 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=37 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=133 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=142 target=1 timing=9 power=1 parameter1=0 parameter2=32 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=144 target=1 timing=9 power=1 parameter1=1 parameter2=1 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_galai~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 90 1
END
//__________________________________________________________________________________

// CHORISTER (S&S)

BEGIN @442
DESIGNATED 442
SUBCOMPONENT @440 (FILE_EXISTS_IN_GAME ~a!chor.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "a!chor" = 1) BEGIN
			SET "a!chor" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a!chor%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10 // lore
		WRITE_BYTE 0x006a 15  // pick pockets
		ADD_CRE_ITEM ~sw1h04~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch11~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch12~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch13~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch21~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch22~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch23~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch31~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch32~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch41~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch42~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch51~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a!ch61~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 90 1
END
//__________________________________________________________________________________

// MEISTERSINGER (SoB)

BEGIN @443
DESIGNATED 443
SUBCOMPONENT @440 // (FILE_EXISTS_IN_GAME ~d5_meist.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_meist.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/meistersinger/meistersinger.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_meist" = 1) BEGIN
			SET "d5_meist" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_meist%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10  // lore
		WRITE_BYTE 0x006a 15  // pick pockets
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mei11~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mei12~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mei13~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mei14~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl311~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_meisu~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~d5_meisa~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=34 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=35 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=36 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=37 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=133 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=142 target=1 timing=9 power=1 parameter1=0 parameter2=32 END
ACTION_IF FILE_EXISTS_IN_GAME ~d5_meis1.spl~ THEN BEGIN
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_meis1~ END
END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 91 1
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @458
DESIGNATED 458
SUBCOMPONENT @440

COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0238 13
		WRITE_BYTE 0x023C 16
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10 // lore
		WRITE_BYTE 0x006a 15  // pick pockets
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~garric.cre~ ~override~
			~garric2.cre~ ~override~
			~garric4.cre~ ~override~
			~garric6.cre~ ~override~
		SET_BG2_PROFICIENCY 106 1
		SET_BG2_PROFICIENCY 91 1
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @459
DESIGNATED 459
SUBCOMPONENT @440

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							ALORA
//__________________________________________________________________________________
//__________________________________________________________________________________

// SWASHBUCKLER

BEGIN @461
DESIGNATED 461
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) OR (FILE_EXISTS_IN_GAME ~alora09.cre~) ~Alora~
SUBCOMPONENT @460

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	COPY_EXISTING ~alora.cre~ ~override~
				~alora6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 114 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	COPY_EXISTING ~kitlist.2da~ ~override~
		COUNT_2DA_ROWS 8 "rows"
		FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
			READ_2DA_ENTRY "%index%" 5 8 "clab"
				PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_swash" = 1) BEGIN
			SET "d5_swash" = "%index%"-1
			SET "rows" = 0
			END
		END
	COPY_EXISTING ~alora.cre~ ~override~
				~alora6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_swash~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 114 1
	END
END
END

ACTION_IF FILE_EXISTS_IN_GAME ~alora09.cre~ THEN BEGIN
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 114 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_swash.2da~ THEN BEGIN
	COPY_EXISTING ~kitlist.2da~ ~override~
		COUNT_2DA_ROWS 8 "rows"
		FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
			READ_2DA_ENTRY "%index%" 5 8 "clab"
				PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_swash" = 1) BEGIN
			SET "d5_swash" = "%index%"-1
			SET "rows" = 0
			END
		END
	COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_swash%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_swash~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 114 1
	END
END
END
//__________________________________________________________________________________

// SNIPER (SoB)

BEGIN @462
DESIGNATED 462
SUBCOMPONENT @460 // (FILE_EXISTS_IN_GAME ~d5_snipe.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_snipe.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/sniper/sniper.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_snipe" = 1) BEGIN
		SET "d5_snipe" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~alora.cre~ ~override~
				~alora6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_snipe%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_armov~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora.cre~ ~override~
				~alora6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora.cre~ ~override~
				~alora6.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 96 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~alora09.cre~ THEN BEGIN
	COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_snipe%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_armov~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 96 1
	END
END
//__________________________________________________________________________________

// BURGLAR (S&S)

BEGIN @463
DESIGNATED 463
SUBCOMPONENT @460 (FILE_EXISTS_IN_GAME ~a!burg.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "a!burg" = 1) BEGIN
		SET "a!burg" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~alora.cre~ ~override~
				~alora6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a!burg%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=90 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=91 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=59 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=277 target=1 timing=9 power=1 parameter1=-20 parameter2=0 END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=92 target=1 timing=9 power=1 parameter1=-20 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora.cre~ ~override~
				~alora6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora.cre~ ~override~
				~alora6.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 96 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~alora09.cre~ THEN BEGIN
	COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 4 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_snipe%~ // changes kit
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=90 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=91 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=275 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=59 target=1 timing=9 power=1 parameter1=10 parameter2=0 END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=277 target=1 timing=9 power=1 parameter1=-20 parameter2=0 END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=92 target=1 timing=9 power=1 parameter1=-20 parameter2=0 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			SET_BG2_PROFICIENCY 105 2
			SET_BG2_PROFICIENCY 96 1
	END
END
//__________________________________________________________________________________

// MISADVENTURER (SoB C/T)

BEGIN @464
DESIGNATED 464
SUBCOMPONENT @460 // (FILE_EXISTS_IN_GAME ~d5_msadv.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_msadv.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/misadventurer/misadventurer.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_msadv" = 1) BEGIN
			SET "d5_msadv" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_msadv%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		ADD_CRE_ITEM ~blun01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ 
		ADD_CRE_ITEM ~slng01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ EQUIP
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=34 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=35 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=36 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=37 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=133 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=142 target=1 timing=9 power=1 parameter1=0 parameter2=32 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 114 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~alora09.cre~ THEN BEGIN
	COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_msadv%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		ADD_CRE_ITEM ~blun01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ 
		ADD_CRE_ITEM ~slng01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON2~ EQUIP
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 timing=9 power=1 parameter1=2 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=34 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=35 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=36 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=37 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=133 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=142 target=1 timing=9 power=1 parameter1=0 parameter2=32 END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 114 1
	END
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @478
DESIGNATED 478
SUBCOMPONENT @460

ACTION_IF GAME_IS ~tutu bgt bgee~ THEN BEGIN
	COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora.cre~ ~override~
			~alora6.cre~ ~override~
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 114 1
	END
END

ACTION_IF FILE_EXISTS_IN_GAME ~alora09.cre~ THEN BEGIN
	COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~alora09.cre~ ~override~
				~alora25.cre~ ~override~
			SET_BG2_PROFICIENCY 96 1
			SET_BG2_PROFICIENCY 105 1
			SET_BG2_PROFICIENCY 114 1
	END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @479
DESIGNATED 479
SUBCOMPONENT @460

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							XAN
//__________________________________________________________________________________
//__________________________________________________________________________________

// BLADESINGER (SoB)

BEGIN @481
DESIGNATED 481
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~xan4.cre~) OR (FILE_EXISTS_IN_GAME ~o#xan09.cre~) ~Xan~
SUBCOMPONENT @480 (FILE_EXISTS_IN_GAME ~d5_blads.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_blads" = 1) BEGIN
			SET "d5_blads" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF FILE_EXISTS_IN_GAME ~xan4.cre~ THEN BEGIN
	COPY_EXISTING ~xan4.cre~ ~override~
				~xan6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 7 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_blads%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 90 2
		SET_BG2_PROFICIENCY 104 1
		SET_BG2_PROFICIENCY 113 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_blad1~ END

END

ACTION_IF FILE_EXISTS_IN_GAME ~xan.cre~ THEN BEGIN
	COPY_EXISTING ~xan.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 7 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_blads%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 90 2
		SET_BG2_PROFICIENCY 104 1
		SET_BG2_PROFICIENCY 113 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_blad1~ END

END

ACTION_IF FILE_EXISTS_IN_GAME ~o#xan09.cre~ THEN BEGIN
	COPY_EXISTING ~o#xan09.cre~ ~override~
				~o#xan25.cre~ ~override~
		READ_SHORT 0x273 xanclass
		PATCH_IF ( xanclass = 7 ) BEGIN
			WRITE_SHORT 0x0234 1 // sets level to 1
			WRITE_SHORT 0x0235 1
			WRITE_SHORT 0x0236 1
			WRITE_SHORT 0x244 0
			WRITE_SHORT 0x246 0x4000 + ~%d5_blads%~ // changes kit
			WRITE_SHORT 0x0024 9
			WRITE_SHORT 0x0026 9
			WRITE_BYTE 0x0066 10
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 104 1
			SET_BG2_PROFICIENCY 113 1
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_blad1~ END
		END
		
END

ACTION_IF FILE_EXISTS_IN_GAME ~sw1h13.itm~ THEN BEGIN
	COPY_EXISTING ~sw1h13.itm~ ~override~
		PATCH_IF (SOURCE_SIZE > 0x71) BEGIN
			READ_BYTE 0x1f fm 
			WRITE_BYTE 0x1f (fm BAND 0b11011111)
			READ_BYTE 0x31 prof
			PATCH_IF prof = 96 BEGIN
				WRITE_SHORT 0x1c 19
				WRITE_BYTE 0x31 90
				READ_LONG 0x54 "valid"
				PATCH_IF (%valid% >= 0) BEGIN
					READ_STRREF 0x54 "desc"
					INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
						REPLACE_TEXTUALLY ~Small Sword~ ~Longsword~
					END
					SAY_EVALUATED 0x54 ~%new_desc%~
				END
			END
		END
		BUT_ONLY
END
//__________________________________________________________________________________

// LOREMASTER (SoB)

BEGIN @482
DESIGNATED 482
SUBCOMPONENT @480 // (FILE_EXISTS_IN_GAME ~d5_lorem.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_lorem.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/loremaster/loremaster.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_lorem" = 1) BEGIN
			SET "d5_lorem" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF FILE_EXISTS_IN_GAME ~xan4.cre~ THEN BEGIN
	COPY_EXISTING ~xan4.cre~ ~override~
				~xan6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 5 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_lorem%~ // changes kit
		WRITE_SHORT 0x0024 8
		WRITE_SHORT 0x0026 8
		WRITE_BYTE 0x0066 25
		SET_BG2_PROFICIENCY 90 1
		SET_BG2_PROFICIENCY 105 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spwi110~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_lorm2~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=191 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=189 target=1 timing=9 power=1 parameter1=1 parameter2=1 END
END

ACTION_IF FILE_EXISTS_IN_GAME ~xan.cre~ THEN BEGIN
	COPY_EXISTING ~xan.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 5 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_lorem%~ // changes kit
		WRITE_SHORT 0x0024 8
		WRITE_SHORT 0x0026 8
		WRITE_BYTE 0x0066 25
		SET_BG2_PROFICIENCY 90 1
		SET_BG2_PROFICIENCY 105 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spwi110~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_lorm2~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=191 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=189 target=1 timing=9 power=1 parameter1=1 parameter2=1 END
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#xan09.cre~ THEN BEGIN
	COPY_EXISTING ~o#xan09.cre~ ~override~
				~o#xan25.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 5 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_lorem%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 25
		SET_BG2_PROFICIENCY 90 1
		SET_BG2_PROFICIENCY 105 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spwi110~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_lorm2~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=191 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=189 target=1 timing=9 power=1 parameter1=1 parameter2=1 END
END

ACTION_IF FILE_EXISTS_IN_GAME ~sw1h13.itm~ THEN BEGIN
	COPY_EXISTING ~sw1h13.itm~ ~override~
		PATCH_IF (SOURCE_SIZE > 0x71) BEGIN
			READ_BYTE 0x1e bard 
			WRITE_BYTE 0x1e (bard BAND 0b10111111)
			READ_BYTE 0x31 prof
			PATCH_IF prof = 96 BEGIN
				WRITE_SHORT 0x1c 19
				WRITE_BYTE 0x31 90
				READ_LONG 0x54 "valid"
				PATCH_IF (%valid% >= 0) BEGIN
					READ_STRREF 0x54 "desc"
					INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
						REPLACE_TEXTUALLY ~Small Sword~ ~Longsword~
					END
					SAY_EVALUATED 0x54 ~%new_desc%~
				END
			END
		END
		BUT_ONLY
END
//__________________________________________________________________________________

// FIGHTER/MAGE

BEGIN @483
DESIGNATED 483
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~xan4.cre~) OR (FILE_EXISTS_IN_GAME ~o#xan09.cre~) ~Xan~
SUBCOMPONENT @480 (NOT FILE_EXISTS_IN_GAME ~d5_blads.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_blads" = 1) BEGIN
			SET "d5_blads" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF FILE_EXISTS_IN_GAME ~xan4.cre~ THEN BEGIN
	COPY_EXISTING ~xan4.cre~ ~override~
				~xan6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 7 // sets class
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 90 2
		SET_BG2_PROFICIENCY 104 1
		SET_BG2_PROFICIENCY 113 1
END

ACTION_IF FILE_EXISTS_IN_GAME ~xan.cre~ THEN BEGIN
	COPY_EXISTING ~xan.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 7 // sets class
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 90 2
		SET_BG2_PROFICIENCY 104 1
		SET_BG2_PROFICIENCY 113 1
END

ACTION_IF FILE_EXISTS_IN_GAME ~o#xan09.cre~ THEN BEGIN
	COPY_EXISTING ~o#xan09.cre~ ~override~
				~o#xan25.cre~ ~override~
		READ_SHORT 0x273 xanclass
		PATCH_IF ( xanclass = 7 ) BEGIN
			WRITE_SHORT 0x0234 1 // sets level to 1
			WRITE_SHORT 0x0235 1
			WRITE_SHORT 0x0236 1
			WRITE_SHORT 0x0024 9
			WRITE_SHORT 0x0026 9
			WRITE_BYTE 0x0066 10
			SET_BG2_PROFICIENCY 90 2
			SET_BG2_PROFICIENCY 104 1
			SET_BG2_PROFICIENCY 113 1
		END	
END

ACTION_IF FILE_EXISTS_IN_GAME ~sw1h13.itm~ THEN BEGIN
	COPY_EXISTING ~sw1h13.itm~ ~override~
		PATCH_IF (SOURCE_SIZE > 0x71) BEGIN
			READ_BYTE 0x1f fm 
			WRITE_BYTE 0x1f (fm BAND 0b11011111)
			READ_BYTE 0x31 prof
			PATCH_IF prof = 96 BEGIN
				WRITE_SHORT 0x1c 19
				WRITE_BYTE 0x31 90
				READ_LONG 0x54 "valid"
				PATCH_IF (%valid% >= 0) BEGIN
					READ_STRREF 0x54 "desc"
					INNER_PATCH_SAVE new_desc ~%desc%~ BEGIN
						REPLACE_TEXTUALLY ~Small Sword~ ~Longsword~
					END
					SAY_EVALUATED 0x54 ~%new_desc%~
				END
			END
		END
		BUT_ONLY
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @498
DESIGNATED 498
SUBCOMPONENT @480 (GAME_IS ~tutu bgt bgee~)

ACTION_IF FILE_EXISTS_IN_GAME ~xan4.cre~ THEN BEGIN
	COPY_EXISTING ~xan4.cre~ ~override~
				~xan6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 8
		WRITE_SHORT 0x0026 8
		WRITE_BYTE 0x0066 10
END

ACTION_IF FILE_EXISTS_IN_GAME ~xan.cre~ THEN BEGIN
	COPY_EXISTING ~xan.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 8
		WRITE_SHORT 0x0026 8
		WRITE_BYTE 0x0066 10
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @499
DESIGNATED 499
SUBCOMPONENT @480

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							SHAR-TEEL
//__________________________________________________________________________________
//__________________________________________________________________________________

// BERSERKER

BEGIN @501
DESIGNATED 501
REQUIRE_PREDICATE GAME_IS ~tutu bgt bgee~ ~Shar-Teel~
SUBCOMPONENT @500

COPY_EXISTING ~sharte.cre~ ~override~
				~sharte4.cre~ ~override~
				~sharte6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 13
		WRITE_SHORT 0x0026 13
		WRITE_BYTE 0x0066 5
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl321~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~sharte.cre~ ~override~
				~sharte4.cre~ ~override~
				~sharte6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~sharte.cre~ ~override~
				~sharte4.cre~ ~override~
				~sharte6.cre~ ~override~
		SET_BG2_PROFICIENCY 114 2
		SET_BG2_PROFICIENCY 90 1
		SET_BG2_PROFICIENCY 96 1
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @518
DESIGNATED 518
SUBCOMPONENT @500

COPY_EXISTING ~sharte.cre~ ~override~
				~sharte4.cre~ ~override~
				~sharte6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 13
		WRITE_SHORT 0x0026 13
		WRITE_BYTE 0x0066 5
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~sharte.cre~ ~override~
				~sharte4.cre~ ~override~
				~sharte6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~sharte.cre~ ~override~
				~sharte4.cre~ ~override~
				~sharte6.cre~ ~override~
		SET_BG2_PROFICIENCY 114 2
		SET_BG2_PROFICIENCY 90 1
		SET_BG2_PROFICIENCY 96 1
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @519
DESIGNATED 519
SUBCOMPONENT @500

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							TIAX
//__________________________________________________________________________________
//__________________________________________________________________________________

// STRIFELEADER

BEGIN @541
DESIGNATED 541
REQUIRE_PREDICATE (GAME_IS ~tutu bgt bgee~) ~Tiax~
SUBCOMPONENT @540 (FILE_EXISTS_IN_GAME ~a#cyric.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "a#cyric" = 1) BEGIN
		SET "a#cyric" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~tiax.cre~ ~override~
				~tiax4.cre~ ~override~
				~tiax6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 3 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#cyric%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~a#cyr0b~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~spcl423~ END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~tiax.cre~ ~override~
				~tiax4.cre~ ~override~
				~tiax6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~tiax.cre~ ~override~
				~tiax4.cre~ ~override~
				~tiax6.cre~ ~override~
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 107 1
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @558
DESIGNATED 558
SUBCOMPONENT @540

COPY_EXISTING ~tiax.cre~ ~override~
				~tiax4.cre~ ~override~
				~tiax6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 7
		WRITE_SHORT 0x0026 7
		WRITE_BYTE 0x0066 10
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~tiax.cre~ ~override~
				~tiax4.cre~ ~override~
				~tiax6.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~tiax.cre~ ~override~
				~tiax4.cre~ ~override~
				~tiax6.cre~ ~override~
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 107 1
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @559
DESIGNATED 559
SUBCOMPONENT @540

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							VICONIA
//__________________________________________________________________________________
//__________________________________________________________________________________

// DARKCLOAK (SoB)

BEGIN @581
DESIGNATED 581
REQUIRE_PREDICATE NOT GAME_IS ~iwdee~ ~Viconia~
SUBCOMPONENT @580 // (FILE_EXISTS_IN_GAME ~d5_shar.2da~)

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_shar.2da~ THEN BEGIN
	INCLUDE ~npc_ee/kits/darkcloak/darkcloak.tpa~
END

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_shar" = 1) BEGIN
			SET "d5_shar" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_shar%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_shabl~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_shar%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_shabl~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x0273 12 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_SHORT 0x0244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_shar%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		SET_BG2_PROFICIENCY 96 1
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_shabl~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END
//__________________________________________________________________________________

// NIGHTCLOAK (DR)

BEGIN @582
DESIGNATED 582
SUBCOMPONENT @580 (FILE_EXISTS_IN_GAME ~a#shar.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "a#shar" = 1) BEGIN
			SET "a#shar" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#shar%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#shar%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN
	COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x0273 12 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_SHORT 0x0244 0
		WRITE_SHORT 0x246 0x4000 + ~%a#shar%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_SHABL~ END
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END
//__________________________________________________________________________________

// CLERIC/THIEF

BEGIN @583
DESIGNATED 583
SUBCOMPONENT @580

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		ADD_CRE_ITEM ~blun01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 115 1
	END
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		ADD_CRE_ITEM ~blun01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 115 1
	END
END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN

	COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 15 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		ADD_CRE_ITEM ~blun01~ #0 #0 #0 ~IDENTIFIED~ ~WEAPON1~ EQUIP
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 115 1
	END
END
//__________________________________________________________________________________

// DROP TO LEVEL 1

BEGIN @598
DESIGNATED 598
SUBCOMPONENT @580

ACTION_IF GAME_IS ~tutu bgee~ THEN BEGIN
	COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi6.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_BYTE 0x0066 10
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END

ACTION_IF GAME_IS ~bgt~ THEN BEGIN
	COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi.cre~ ~override~
				~viconi4.cre~ ~override~
				~viconi61.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END

ACTION_IF GAME_IS ~bgt tob bg2ee~ THEN BEGIN

	COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9
		WRITE_BYTE 0x0066 10
	ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
		COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
			LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
		COPY_EXISTING ~viconi6.cre~ ~override~
				~viconi8.cre~ ~override~
				~viconi9.cre~ ~override~
				~viconi11.cre~ ~override~
				~viconi13.cre~ ~override~
				~viconi16.cre~ ~override~
			SET_BG2_PROFICIENCY 107 1
			SET_BG2_PROFICIENCY 101 1
	END
END
//__________________________________________________________________________________

// NO CHANGE

BEGIN @599
DESIGNATED 599
SUBCOMPONENT @580

COPY ~npc_ee/lib/d5_nada.d5~ ~override~

//__________________________________________________________________________________



//						BG2 NPCs BELOW


/*

//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							YOSHIMO
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @8151
DESIGNATED 875
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Yoshimo~

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_SWASH.2da~ THEN BEGIN
	COPY_EXISTING ~YOSHI7.cre~ ~override~
				~YOSHI8.cre~ ~override~
				~YOSHI10.cre~ ~override~
				~YOSHI11.cre~ ~override~
				~YOSHI12.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0C // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_SWASH.2da~ THEN BEGIN
	COPY_EXISTING ~kitlist.2da~ ~override~
		COUNT_2DA_ROWS 8 "rows"
		FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
			READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_SWASH" = 1) BEGIN
				SET "d5_SWASH" = "%index%"-1
				SET "rows" = 0
			END
		END
	BUT_ONLY

	COPY_EXISTING ~YOSHI7.cre~ ~override~
			~YOSHI8.cre~ ~override~
			~YOSHI10.cre~ ~override~
			~YOSHI11.cre~ ~override~
			~YOSHI12.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 4 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_SWASH%~ // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10
		LPF ADD_CRE_EFFECT INT_VAR opcode=0 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_SWASH~ END
END

ACTION_IF FILE_EXISTS_IN_GAME ~npsw02.itm~ THEN BEGIN 
	COPY_EXISTING ~npsw02.itm~ ~override~
		READ_BYTE 0x2b "assassin"
		WRITE_BYTE 0x2b ("%assassin%" BAND "0b00000000")
		BUT_ONLY
END
//__________________________________________________________________________________


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							VALYGAR
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @8162
DESIGNATED 880
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Valygar~
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~d5_mageh.2da~) OR (FILE_EXISTS_IN_GAME ~d5_nuwslm.d5~) ~Valygar~
SUBCOMPONENT @8161 (FILE_EXISTS_IN_GAME ~d5_mageh.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_MAGEH" = 1) BEGIN
			SET "d5_MAGEH" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VALYG8.cre~ ~override~
			~VALYG9.cre~ ~override~
			~VALYG11.cre~ ~override~
			~VALYG12.cre~ ~override~
			~VALYG14.cre~ ~override~
		WRITE_SHORT 0x0234 1 // sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 12 // sets class
		WRITE_BYTE 0x0045 15
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0068 15
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_MAGEH%~ // changes kit
		WRITE_SHORT 0x0024 14
		WRITE_SHORT 0x0026 14
//		LPF ADD_CRE_EFFECT INT_VAR opcode=44 target=1 timing=9 power=1 parameter1=-2 parameter2=0 END
//		LPF ADD_CRE_EFFECT INT_VAR opcode=10 target=1 timing=9 power=1 parameter1=-2 parameter2=0 END

ACTION_IF FILE_EXISTS_IN_GAME ~npsw04.itm~ THEN BEGIN 
	COPY_EXISTING ~npsw04.itm~ ~override~
		WRITE_SHORT 0x26 15
		WRITE_SHORT 0x2C 16
		WRITE_SHORT 0x30 14
		READ_BYTE 0x29 "avenger"
		WRITE_BYTE 0x29 ("%avenger%" BAND "0b01001000")
		BUT_ONLY
END
//__________________________________________________________________________________

BEGIN @8163
DESIGNATED 881
SUBCOMPONENT @8161 (FILE_EXISTS_IN_GAME ~d5_nuwslm.d5~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_NUWSL" = 1) BEGIN
			SET "d5_NUWSL" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~VALYG8.cre~ ~override~
			~VALYG9.cre~ ~override~
			~VALYG11.cre~ ~override~
			~VALYG12.cre~ ~override~
			~VALYG14.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 9 // sets class
		WRITE_BYTE 0x0045 10
		WRITE_BYTE 0x0064 5
		WRITE_BYTE 0x0065 5
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x0067 5
		WRITE_BYTE 0x0068 10
		WRITE_BYTE 0x0069 5
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_NUWSL%~ // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12
		LPF ADD_CRE_EFFECT INT_VAR opcode=248 target=1 timing=9 power=0 resist_dispel=2 STR_VAR resource=~D5_WIZSA~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=248 target=1 timing=9 power=0 resist_dispel=2 STR_VAR resource=~D5_WIZSB~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=248 target=1 timing=9 power=0 resist_dispel=2 STR_VAR resource=~D5_WIZSC~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=37 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=36 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=33 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=34 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=35 target=1 parameter1=1 parameter2=0 timing=9 power=0 resist_dispel=2 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_WIZS2~ END
//__________________________________________________________________________________


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							NALIA
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @8172
DESIGNATED 885
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Nalia~
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~d5_chori.2da~) OR (FILE_EXISTS_IN_GAME ~d5_bendr.2da~) ~Nalia~
SUBCOMPONENT @8171 (FILE_EXISTS_IN_GAME ~d5_chori.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_CHORI" = 1) BEGIN
			SET "d5_CHORI" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~NALIA8.cre~ ~override~
			~NALIA10.cre~ ~override~
			~NALIA11.cre~ ~override~
			~NALIA13.cre~ ~override~
			~NALIA15.cre~ ~override~
			~NALIA18.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 5 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 10
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_CHORI%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~d5_CHORA~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_CHO11~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=147 target=1 timing=9 power=1 STR_VAR resource=~d5_CHO12~ END
//__________________________________________________________________________________

BEGIN @8173
DESIGNATED 886
SUBCOMPONENT @8171 (FILE_EXISTS_IN_GAME ~d5_bendr.2da~)

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
		PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_bendr" = 1) BEGIN
			SET "d5_bendr" = "%index%"-1
			SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~NALIA8.cre~ ~override~
			~NALIA10.cre~ ~override~
			~NALIA11.cre~ ~override~
			~NALIA13.cre~ ~override~
			~NALIA15.cre~ ~override~
			~NALIA18.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 14 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 10
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_bendr%~ // changes kit
		WRITE_SHORT 0x0024 11
		WRITE_SHORT 0x0026 11

//__________________________________________________________________________________


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							HAER'DALIS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @8181
DESIGNATED 890
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Haer'Dalis~

COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 5 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + 0x0F // changes kit
		WRITE_SHORT 0x0024 10
		WRITE_SHORT 0x0026 10

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_JONGL.2da~ THEN BEGIN
	COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		LPF ADD_CRE_EFFECT INT_VAR opcode=73 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL542A~ END
END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_JONGL.2da~ THEN BEGIN
	COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		LPF ADD_CRE_EFFECT INT_VAR opcode=278 target=1 timing=9 power=1 parameter1=1 parameter2=0 END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL542A~ END
END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~HAER10.cre~ ~override~
			~HAER11.cre~ ~override~
			~HAER13.cre~ ~override~
			~HAER15.cre~ ~override~
			~HAER19.cre~ ~override~
		SET_BG2_PROFICIENCY 91 1
		SET_BG2_PROFICIENCY 95 1
		SET_BG2_PROFICIENCY 114 1
END

ACTION_IF FILE_EXISTS_IN_GAME ~npsw05.itm~ THEN BEGIN 
	COPY_EXISTING ~npsw05.itm~ ~override~
				~npsw06.itm~ ~override~
		READ_BYTE 0x2b "skald"
		WRITE_BYTE 0x2b ("%skald%" BAND "0b01011111")
		BUT_ONLY
END
//__________________________________________________________________________________


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							MAZZY
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @8191
DESIGNATED 895
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Mazzy~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_HARTH.2da~ ~Hearthguard kit not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_HARTH" = 1) BEGIN
		SET "d5_HARTH" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
		WRITE_SHORT 0x273 8 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_HARTH%~ // changes kit
		WRITE_SHORT 0x0024 12
		WRITE_SHORT 0x0026 12

COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 2 END

COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL827~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL826~ END
		LPF ADD_CRE_EFFECT INT_VAR opcode=251 target=1 timing=9 power=1 STR_VAR resource=~SPCL676~ END
		ADD_CRE_ITEM ~BLUN21.itm~ #0 #0 #0 ~IDENTIFIED~ ~INV~
		ADD_CRE_ITEM ~SLNG04.itm~ #0 #0 #0 ~IDENTIFIED~ ~INV~

COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		SET_BG2_PROFICIENCY 115 1
		SET_BG2_PROFICIENCY 97 1
		SET_BG2_PROFICIENCY 91 1
		SET_BG2_PROFICIENCY 100 1
		SET_BG2_PROFICIENCY 101 1
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 103 1
		SET_BG2_PROFICIENCY 107 1
		SET_BG2_PROFICIENCY 112 1
END
ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~MAZZY8.cre~ ~override~
			~MAZZY9.cre~ ~override~
			~MAZZY11.cre~ ~override~
			~MAZZY12.cre~ ~override~
			~MAZZY15.cre~ ~override~
		SET_BG2_PROFICIENCY 97 1
		SET_BG2_PROFICIENCY 91 1
		SET_BG2_PROFICIENCY 101 1
		SET_BG2_PROFICIENCY 107 2
		SET_BG2_PROFICIENCY 112 1
END
//__________________________________________________________________________________


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							AERIE
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @8201
DESIGNATED 900
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee~ ~Aerie~
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~d5_FAST.2da~ ~Fastpaws kit not installed~

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS 8 "rows"
	FOR ( index = 31 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY "%index%" 5 8 "clab"
			PATCH_IF ("%clab%" STRING_EQUAL_CASE "d5_FAST" = 1) BEGIN
		SET "d5_FAST" = "%index%"-1
		SET "rows" = 0
		END
	END
	BUT_ONLY

COPY_EXISTING ~AERIE6.cre~ ~override~
			~AERIE7.cre~ ~override~
			~AERIE9.cre~ ~override~
			~AERIE10.cre~ ~override~
			~AERIE11.cre~ ~override~
			~AERIE12.cre~ ~override~
		WRITE_SHORT 0x0234 1 //sets level to 1
		WRITE_SHORT 0x0235 1
		WRITE_SHORT 0x0236 1
//		WRITE_SHORT 0x273 8 // sets class
		WRITE_BYTE 0x0066 10
		WRITE_BYTE 0x006a 5
		WRITE_SHORT 0x244 0
		WRITE_SHORT 0x246 0x4000 + ~%d5_FAST%~ // changes kit
		WRITE_SHORT 0x0024 9
		WRITE_SHORT 0x0026 9

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ THEN BEGIN
	COPY_EXISTING ~AERIE6.cre~ ~override~
			~AERIE7.cre~ ~override~
			~AERIE9.cre~ ~override~
			~AERIE10.cre~ ~override~
			~AERIE11.cre~ ~override~
			~AERIE12.cre~ ~override~
		LPF DELETE_EFFECT INT_VAR match_opcode = 233 END
	COPY_EXISTING ~AERIE6.cre~ ~override~
			~AERIE7.cre~ ~override~
			~AERIE9.cre~ ~override~
			~AERIE10.cre~ ~override~
			~AERIE11.cre~ ~override~
			~AERIE12.cre~ ~override~
		SET_BG2_PROFICIENCY 102 1
		SET_BG2_PROFICIENCY 107 1
		SET_BG2_PROFICIENCY 111 1
END
//__________________________________________________________________________________

*/
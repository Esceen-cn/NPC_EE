BACKUP ~npc_ee/backup~
AUTHOR ~SubtleD~

VERSION ~v3.0~
//README ~npc_ee/readme-NPC_EE.html~

ALWAYS

  INCLUDE ~npc_ee/lib/joinable_npcs.tpa~

// joinable NPC issues for tutu/bgt/eet:
  ACTION_IF GAME_IS ~bgee~ BEGIN
    OUTER_SPRINT tutu_var ~~
    OUTER_SPRINT imoen6_var ~imoen6~
    OUTER_SPRINT jaheir7_var ~jaheir7~
    OUTER_SPRINT minsc7_var ~minsc7~
    OUTER_SPRINT quayle_var ~quayle~
    OUTER_SPRINT viconi6_var ~viconi6~
    OUTER_SPRINT xan_var ~xan~
    OUTER_SPRINT xzar_var ~xzar~
  END ELSE ACTION_IF GAME_IS ~eet~ BEGIN
    OUTER_SPRINT tutu_var ~~
    OUTER_SPRINT imoen6_var ~imoen6_~
    OUTER_SPRINT jaheir7_var ~jaheir7_~
    OUTER_SPRINT minsc7_var ~minsc7_~
    OUTER_SPRINT quayle_var ~quayle_~
    OUTER_SPRINT viconi6_var ~viconi6_~
    OUTER_SPRINT xan_var ~xan_~
    OUTER_SPRINT xzar_var ~xzar_~
  END ELSE ACTION_IF GAME_IS ~bgt~ BEGIN
    OUTER_SPRINT tutu_var ~~
    OUTER_SPRINT imoen6_var ~imoen61~
    OUTER_SPRINT quayle_var ~bgquayle~
    OUTER_SPRINT viconi6_var ~viconi61~
    OUTER_SPRINT xan_var ~bgxan~
    OUTER_SPRINT xzar_var ~bgxzar~
  END ELSE ACTION_IF GAME_IS ~tutu tutu_totsc~ BEGIN
    OUTER_SPRINT tutu_var ~_~
    OUTER_SPRINT imoen6_var ~imoen6~
    OUTER_SPRINT quayle_var ~quayle~
    OUTER_SPRINT viconi6_var ~viconi6~
    OUTER_SPRINT xan_var ~xan~
    OUTER_SPRINT xzar_var ~xzar~
  END
END


LANGUAGE
  ~English~
  ~english~
  ~npc_ee/language/english/setup.tra~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							IMOEN
//__________________________________________________________________________________
//__________________________________________________________________________________


// mage/thief_______________________________________________________________________
BEGIN @102
DESIGNATED 102
REQUIRE_PREDICATE GAME_IS ~bgt bgee tob bg2ee eet~ ~Imoen~
GROUP @5
SUBCOMPONENT @100 

INCLUDE ~npc_ee/npcs/imoen/mage-thief.tpa~

// bard_______________________________________________________________________
BEGIN @104
DESIGNATED 104
GROUP @5
SUBCOMPONENT @100 

INCLUDE ~npc_ee/npcs/imoen/bard.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							JAHEIRA
//__________________________________________________________________________________
//__________________________________________________________________________________


// fighter__________________________________________________________________________
BEGIN @121
DESIGNATED 121
REQUIRE_PREDICATE GAME_IS ~bgt bgee tob bg2ee eet~ ~Jaheira~
GROUP @5
SUBCOMPONENT @120

INCLUDE ~npc_ee/npcs/jaheira/druid.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							KHALID
//__________________________________________________________________________________
//__________________________________________________________________________________


// cleric/ranger____________________________________________________________________
BEGIN @141
DESIGNATED 141
REQUIRE_PREDICATE (GAME_IS ~bgt bgee eet~) OR (FILE_EXISTS_IN_GAME ~zikhalid.cre.2da~) ~Khalid~
GROUP @5
SUBCOMPONENT @140

INCLUDE ~npc_ee/npcs/khalid/cleric-ranger.tpa~


// ranger___________________________________________________________________________
BEGIN @143
DESIGNATED 143
GROUP @5
SUBCOMPONENT @140

INCLUDE ~npc_ee/npcs/khalid/ranger.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							MINSC
//__________________________________________________________________________________
//__________________________________________________________________________________


// fighter__________________________________________________________________________
BEGIN @161
DESIGNATED 161
REQUIRE_PREDICATE GAME_IS ~bgt bgee tob bg2ee eet~ ~Minsc~
GROUP @5
SUBCOMPONENT @160

INCLUDE ~npc_ee/npcs/minsc/fighter.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							DYNAHEIR
//__________________________________________________________________________________
//__________________________________________________________________________________


// sorcerer_________________________________________________________________________
BEGIN @181
DESIGNATED 181
REQUIRE_PREDICATE GAME_IS ~bgt bgee eet~ ~Dynaheir~
GROUP @5
SUBCOMPONENT @180 

INCLUDE ~npc_ee/npcs/dynaheir/sorcerer.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							KIVAN
//__________________________________________________________________________________
//__________________________________________________________________________________




//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							CORAN
//__________________________________________________________________________________
//__________________________________________________________________________________


// thief____________________________________________________________________________
BEGIN @221
DESIGNATED 221
REQUIRE_PREDICATE (GAME_IS ~bgt bgee eet~) OR (FILE_EXISTS_IN_GAME ~o#coran.cre~) ~Coran~
GROUP @5
SUBCOMPONENT @220

INCLUDE ~npc_ee/npcs/coran/thief.tpa~


// ranger___________________________________________________________________________
BEGIN @222
DESIGNATED 222
GROUP @5
SUBCOMPONENT @220

INCLUDE ~npc_ee/npcs/coran/ranger.tpa~


// bard_____________________________________________________________________________
BEGIN @223
DESIGNATED 223
GROUP @5
SUBCOMPONENT @220

INCLUDE ~npc_ee/npcs/coran/bard.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							BRANWEN
//__________________________________________________________________________________
//__________________________________________________________________________________


// fighter/cleric___________________________________________________________________
BEGIN @242
DESIGNATED 242
REQUIRE_PREDICATE (GAME_IS ~bgt bgee eet~) OR (FILE_EXISTS_IN_GAME ~o#bran.cre~) ~Branwen~
GROUP @5
SUBCOMPONENT @240

INCLUDE ~npc_ee/npcs/branwen/fighter-cleric.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							SAFANA
//__________________________________________________________________________________
//__________________________________________________________________________________


// fighter/thief___________________________________________________________________
BEGIN @261
DESIGNATED 261
REQUIRE_PREDICATE GAME_IS ~bgt bgee eet~ ~Safana~
GROUP @5
SUBCOMPONENT @260

INCLUDE ~npc_ee/npcs/safana/fighter-thief.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							XZAR
//__________________________________________________________________________________
//__________________________________________________________________________________


// necromancer/cleric_______________________________________________________________
BEGIN @302
DESIGNATED 302
REQUIRE_PREDICATE (GAME_IS ~bgt bgee eet~) ~Xzar~
GROUP @5
SUBCOMPONENT @300

INCLUDE ~npc_ee/npcs/xzar/cleric-mage.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							MONTARON
//__________________________________________________________________________________
//__________________________________________________________________________________


// sc thief_________________________________________________________________________
BEGIN @321
DESIGNATED 321
REQUIRE_PREDICATE GAME_IS ~bgt bgee eet~ ~Montaron~
GROUP @5
SUBCOMPONENT @320

INCLUDE ~npc_ee/npcs/montaron/thief.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							ALORA
//__________________________________________________________________________________
//__________________________________________________________________________________


// cleric/thief_____________________________________________________________________
BEGIN @464
DESIGNATED 464
REQUIRE_PREDICATE (GAME_IS ~bgt bgee eet~) OR (FILE_EXISTS_IN_GAME ~alora09.cre~) ~Alora~
GROUP @5
SUBCOMPONENT @460

INCLUDE ~npc_ee/npcs/alora/cleric-thief.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							XAN
//__________________________________________________________________________________
//__________________________________________________________________________________


// bard_____________________________________________________________________________
BEGIN @482
DESIGNATED 482
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~xan4.cre~) OR (FILE_EXISTS_IN_GAME ~o#xan09.cre~) ~Xan~
GROUP @5
SUBCOMPONENT @480

INCLUDE ~npc_ee/npcs/xan/bard.tpa~


// fighter/mage_____________________________________________________________________
BEGIN @483
DESIGNATED 483
GROUP @5
SUBCOMPONENT @480 

INCLUDE ~npc_ee/npcs/xan/fighter-mage.tpa~

// sorcerer_________________________________________________________________________
BEGIN @484
DESIGNATED 484
GROUP @5
SUBCOMPONENT @480 

INCLUDE ~npc_ee/npcs/xan/sorcerer.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							VICONIA
//__________________________________________________________________________________
//__________________________________________________________________________________


// cleric/thief_____________________________________________________________________
BEGIN @583
DESIGNATED 583
REQUIRE_PREDICATE NOT GAME_IS ~iwdee~ ~Viconia~
GROUP @5
SUBCOMPONENT @580 

INCLUDE ~npc_ee/npcs/viconia/cleric-thief.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							NEERA
//__________________________________________________________________________________
//__________________________________________________________________________________


// sorcerer_________________________________________________________________________
BEGIN @621
DESIGNATED 621
REQUIRE_PREDICATE GAME_IS ~bgee bg2ee eet~ ~Neera~
GROUP @5
SUBCOMPONENT @620

INCLUDE ~npc_ee/npcs/neera/sorcerer.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							YOSHIMO
//__________________________________________________________________________________
//__________________________________________________________________________________


BEGIN @682
DESIGNATED 682
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee eet~ ~Yoshimo~
GROUP @5
SUBCOMPONENT @680

INCLUDE ~npc_ee/npcs/yoshimo/fighter-thief.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							VALYGAR
//__________________________________________________________________________________
//__________________________________________________________________________________


// fighter/thief____________________________________________________________________
BEGIN @702
DESIGNATED 702
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee eet~ ~Valygar~
GROUP @5
SUBCOMPONENT @700

INCLUDE ~npc_ee/npcs/valygar/fighter-thief.tpa~


// fighter__________________________________________________________________________
BEGIN @704
DESIGNATED 704
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee eet~ ~Valygar~
GROUP @5
SUBCOMPONENT @700

INCLUDE ~npc_ee/npcs/valygar/fighter.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							NALIA
//__________________________________________________________________________________
//__________________________________________________________________________________


// thief____________________________________________________________________________
BEGIN @721
DESIGNATED 721
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee eet~ ~Nalia~
GROUP @5
SUBCOMPONENT @720 

INCLUDE ~npc_ee/npcs/nalia/thief.tpa~


// bard_____________________________________________________________________________
BEGIN @722
DESIGNATED 722
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee eet~ ~Nalia~
GROUP @5
SUBCOMPONENT @720 

INCLUDE ~npc_ee/npcs/nalia/bard.tpa~


// thief____________________________________________________________________________
BEGIN @721
DESIGNATED 721
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee eet~ ~Nalia~
GROUP @5
SUBCOMPONENT @720 

INCLUDE ~npc_ee/npcs/nalia/thief.tpa~


// cleric/mage______________________________________________________________________
BEGIN @723
DESIGNATED 723
GROUP @5
SUBCOMPONENT @720 

INCLUDE ~npc_ee/npcs/nalia/cleric-mage.tpa~


// sorcerer_________________________________________________________________________
BEGIN @724
DESIGNATED 724
GROUP @5
SUBCOMPONENT @720 

INCLUDE ~npc_ee/npcs/nalia/sorcerer.tpa~


//__________________________________________________________________________________
//__________________________________________________________________________________
//
//							MAZZY
//__________________________________________________________________________________
//__________________________________________________________________________________


// fighter/cleric___________________________________________________________________
BEGIN @761
DESIGNATED 761
REQUIRE_PREDICATE GAME_IS ~bgt tob bg2ee eet~ ~Mazzy~
GROUP @5
SUBCOMPONENT @760

INCLUDE ~npc_ee/npcs/mazzy/fighter-cleric.tpa~


// paladin__________________________________________________________________________
BEGIN @762
DESIGNATED 762
GROUP @5
SUBCOMPONENT @760

INCLUDE ~npc_ee/npcs/mazzy/paladin.tpa~




//__________________________________________________________________________________
//__________________________________________________________________________________
//
//					INNATE ABILITIES FOR SINGLE-CLASS
//__________________________________________________________________________________
//__________________________________________________________________________________

BEGIN @2000
DESIGNATED 2000
REQUIRE_PREDICATE GAME_IS ~bgee bg2ee iwdee eet~ @2
//GROUP @6

OUTER_SPRINT adopt_kit @2011
OUTER_SPRINT different_kit @2012

//first, grab available spellstate_________________________________________________
//
DEFINE_ACTION_FUNCTION d5_resolve_state INT_VAR index=0 delete=0 STR_VAR new_state_id = ~blah~ RET new_state_ind BEGIN
 OUTER_SET min_new=118
 COPY_EXISTING ~splstate.ids~ override
  new_state_ind=0
  found=0
  READ_2DA_ENTRIES_NOW stats 2
  FOR (row=0;row<stats;row+=1) BEGIN
    READ_2DA_ENTRY_FORMER stats row 0 ind
    READ_2DA_ENTRY_FORMER stats row 1 str
    SET $stat("%row%") = ind
    PATCH_IF index BEGIN
      PATCH_IF ind=index BEGIN
        REMOVE_2DA_ROW row 2
        found=1
        PATCH_IF delete=0 BEGIN
          INSERT_2DA_ROW row 2 ~%index% %new_state_id%~
        END
        row=stats
      END
    END ELSE BEGIN
      PATCH_IF ~%str%~ STRING_EQUAL_CASE ~%new_state_id%~ BEGIN
        new_state_ind=ind
        found=1
     /* row=stats */ // don't stop looking, the same ID may be assigned to a greater index, which takes priority when compiling
      END
    END
  END
  PATCH_IF found=0 BEGIN
    new_state_ind=min_new
    PHP_EACH stat AS row => ind BEGIN
      PATCH_IF found=0 && (row+1 < stats) BEGIN // not at the end of file
        next_row = row+1
        next_ind = EVAL $stat("%next_row%")
        PATCH_IF index BEGIN
          PATCH_IF index<next_ind && index>ind BEGIN
            INSERT_2DA_ROW next_row 2 ~%index% %new_state_id%~
            found=1
          END
        END ELSE BEGIN
          PATCH_IF new_state_ind<next_ind BEGIN
            PATCH_IF ind<new_state_ind BEGIN
              INSERT_2DA_ROW next_row 2 ~%new_state_ind% %new_state_id%~
              found=1
            END ELSE BEGIN
              new_state_ind+=1
              PATCH_IF new_state_ind<next_ind BEGIN
                INSERT_2DA_ROW next_row 2 ~%new_state_ind% %new_state_id%~
                found=1
              END
            END
          END
        END
      END ELSE BEGIN // at the end of file
        PATCH_IF found=0 BEGIN
          PATCH_IF index BEGIN
            INSERT_2DA_ROW stats 2 ~%index% %new_state_id%~
          END ELSE BEGIN
            PATCH_IF new_state_ind>ind BEGIN
              INSERT_2DA_ROW stats 2 ~%new_state_ind% %new_state_id%~
            END ELSE BEGIN
              new_state_ind+=1
              INSERT_2DA_ROW stats 2 ~%new_state_ind% %new_state_id%~
            END
          END
        END
      END
    END // PHP_EACH
  END
END

LAF d5_resolve_state STR_VAR new_state_id = ~NEW_PROFICIENCIES~ RET new_state_ind END

OUTER_SET new_profs_state = %new_state_ind%

APPEND ~splprot.2da~ ~D5_PROFS_STATE%TAB%0x112%TAB%%new_profs_state%%TAB%1~

COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~D5_PROFS_STATE~ BEGIN
	    SET profs_state = %row%
	  END
	END
BUT_ONLY
//__________________________________________________________________________________


//find all kits for each class, build dialogue pieces________________________________
//
COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS ~10~ "rows"
	FOR ( index = 1 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY %index% 9 10 kit_code
		READ_2DA_ENTRY %index% 3 10 kit_name
		READ_2DA_ENTRY %index% 4 10 kit_desc
		READ_2DA_ENTRY %index% 8 10 kit_class
		DEFINE_ASSOCIATIVE_ARRAY d5_kits BEGIN "%kit_code%" , "%kit_name%" , "%kit_desc%" => "%kit_class%" END
	END
BUT_ONLY

OUTER_SET block_num = 0

ACTION_PHP_EACH d5_kits AS zoo => zu BEGIN
	OUTER_SET block_num = (%block_num% + 1)
	OUTER_PATCH foo BEGIN
		LOOKUP_IDS_SYMBOL_OF_INT ids_name ~kit~ %zoo%
	END
	ACTION_IF (%zu% = 2) BEGIN
		OUTER_TEXT_SPRINT class ~fi~
	END
	ACTION_IF (%zu% = 6) BEGIN
		OUTER_TEXT_SPRINT class ~pa~
	END
	ACTION_IF (%zu% = 12) BEGIN
		OUTER_TEXT_SPRINT class ~ra~
	END
	ACTION_IF (%zu% = 4) BEGIN
		OUTER_TEXT_SPRINT class ~th~
	END
	ACTION_IF (%zu% = 5) BEGIN
		OUTER_TEXT_SPRINT class ~ba~
	END
	ACTION_IF (%zu% = 3) BEGIN
		OUTER_TEXT_SPRINT class ~cl~
	END
	ACTION_IF (%zu% = 11) BEGIN
		OUTER_TEXT_SPRINT class ~dr~
	END
	ACTION_IF (%zu% = 1) BEGIN
		OUTER_TEXT_SPRINT class ~ma~
	END
	ACTION_IF (%zu% = 19) BEGIN
		OUTER_TEXT_SPRINT class ~so~
	END
	ACTION_IF (%zu% = 20) BEGIN
		OUTER_TEXT_SPRINT class ~mo~
	END
	ACTION_IF (%zu% = 21) BEGIN
		OUTER_TEXT_SPRINT class ~sh~
	END
	ACTION_IF (%zu% = 7) OR (%zu% = 8) OR (%zu% = 9) OR (%zu% = 13) OR (%zu% = 14) OR (%zu% = 15) OR (%zu% = 16) OR (%zu% = 18) BEGIN
		OUTER_TEXT_SPRINT class ~dummy~
	END
	ACTION_GET_STRREF EVAL %zoo_1% ~name_string~
	ACTION_GET_STRREF EVAL %zoo_2% ~desc_string~
	APPEND_OUTER ~npc_ee/%class%/d5dfile1.txt~ "IF ~~ THEN REPLY ~%name_string%~ GOTO d5%class%kit_%block_num%" KEEP_CRLF
	APPEND_OUTER ~npc_ee/%class%/d5dfile2.txt~ "IF ~~ THEN BEGIN d5%class%kit_%block_num% %WNL% SAY ~%desc_string%~ %WNL% IF ~~ THEN REPLY ~%adopt_kit%~ DO ~AddKit(%ids_name%)~ EXIT %WNL% IF ~~ THEN REPLY ~%different_kit%~ GOTO d5%class%kit %WNL% END %WNL%" KEEP_CRLF
END
//__________________________________________________________________________________

//patch together complete dialogues_________________________________________________
//
COPY ~npc_ee/fi/d5fikit.d~ ~npc_ee/d5fikit.d~
	APPEND_FILE ~npc_ee/fi/d5dfile1.txt~
	APPEND_FILE ~npc_ee/fi/d5dfile2.txt~

COPY ~npc_ee/pa/d5pakit.d~ ~npc_ee/d5pakit.d~
	APPEND_FILE ~npc_ee/pa/d5dfile1.txt~
	APPEND_FILE ~npc_ee/pa/d5dfile2.txt~

COPY ~npc_ee/ra/d5rakit.d~ ~npc_ee/d5rakit.d~
	APPEND_FILE ~npc_ee/ra/d5dfile1.txt~
	APPEND_FILE ~npc_ee/ra/d5dfile2.txt~

COPY ~npc_ee/th/d5thkit.d~ ~npc_ee/d5thkit.d~
	APPEND_FILE ~npc_ee/th/d5dfile1.txt~
	APPEND_FILE ~npc_ee/th/d5dfile2.txt~

COPY ~npc_ee/ba/d5bakit.d~ ~npc_ee/d5bakit.d~
	APPEND_FILE ~npc_ee/ba/d5dfile1.txt~
	APPEND_FILE ~npc_ee/ba/d5dfile2.txt~

COPY ~npc_ee/cl/d5clkit.d~ ~npc_ee/d5clkit.d~
	APPEND_FILE ~npc_ee/cl/d5dfile1.txt~
	APPEND_FILE ~npc_ee/cl/d5dfile2.txt~

COPY ~npc_ee/dr/d5drkit.d~ ~npc_ee/d5drkit.d~
	APPEND_FILE ~npc_ee/dr/d5dfile1.txt~
	APPEND_FILE ~npc_ee/dr/d5dfile2.txt~

COPY ~npc_ee/sh/d5shkit.d~ ~npc_ee/d5shkit.d~
	APPEND_FILE ~npc_ee/sh/d5dfile1.txt~
	APPEND_FILE ~npc_ee/sh/d5dfile2.txt~

COPY ~npc_ee/mo/d5mokit.d~ ~npc_ee/d5mokit.d~
	APPEND_FILE ~npc_ee/mo/d5dfile1.txt~
	APPEND_FILE ~npc_ee/mo/d5dfile2.txt~

COPY ~npc_ee/ma/d5makit.d~ ~npc_ee/d5makit.d~
	APPEND_FILE ~npc_ee/ma/d5dfile1.txt~
	APPEND_FILE ~npc_ee/ma/d5dfile2.txt~

COPY ~npc_ee/so/d5sokit.d~ ~npc_ee/d5sokit.d~
	APPEND_FILE ~npc_ee/so/d5dfile1.txt~
	APPEND_FILE ~npc_ee/so/d5dfile2.txt~
//__________________________________________________________________________________

//copy innate abilities and invisicres into game____________________________________
//
COPY ~npc_ee/spl/d5_sckt.spl~ ~override~
	SAY NAME1 @11
	SAY UNIDENTIFIED_DESC @11
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 328 parameter2 = %new_profs_state% END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5profz~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5profz~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5weppa~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5weppb~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5weppc~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5weppd~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5wepsa~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5wepsb~ END
	PATCH_FOR_EACH d5_prof_level IN ~p~ ~s~ ~m~ ~h~ BEGIN
	  PATCH_FOR_EACH d5_prof_wep IN ~lswo~ ~sswo~ ~dagg~ ~scim~ ~2swo~ ~spea~ ~staf~ ~club~ ~flai~ ~hamm~ ~baxe~ ~bows~ ~slin~ ~xbow~ ~s2hw~ ~ssws~ ~ssns~ ~sdw~ BEGIN
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 321 target = 1 timing = 9 STR_VAR resource = EVAL ~d5%d5_prof_level%%d5_prof_wep%~ END
	  END
	END
COPY ~npc_ee/cre/d5_sckit.cre~ ~override~
//__________________________________________________________________________________


//add innate abilities to single-class NPCs_________________________________________
//
LAM JOINABLE_NPC_ARRAY

ACTION_PHP_EACH JOINABLE_NPC_ARRAY AS cre => dv BEGIN
  PRINT ~%cre% => %dv%~ 
  COPY_EXISTING ~%cre%~ ~override~
	PATCH_IF (SOURCE_SIZE > 0x2d3) BEGIN
		READ_BYTE 0x273 npc_class
		PATCH_IF (npc_class = 2) BEGIN // fighter
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
		END
		PATCH_IF (npc_class = 6) BEGIN // paladin
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
		END
		PATCH_IF (npc_class = 12) BEGIN // ranger
//			PATCH_IF NOT FILE_EXISTS_IN_GAME ~d5_deity.d5~ BEGIN
				LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
//			END
		END
		PATCH_IF (npc_class = 4) BEGIN // thief
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
		END
		PATCH_IF (npc_class = 5) BEGIN // bard
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
		END
		PATCH_IF (npc_class = 3) BEGIN // cleric
//			PATCH_IF NOT FILE_EXISTS_IN_GAME ~d5_deity.d5~ BEGIN
				LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
//			END
		END
		PATCH_IF (npc_class = 11) BEGIN // druid
//			PATCH_IF NOT FILE_EXISTS_IN_GAME ~d5_deity.d5~ BEGIN
				LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
//			END
		END
//		PATCH_IF (npc_class = 21) BEGIN // shaman
//			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
//		END
		PATCH_IF (npc_class = 20) BEGIN // monk
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
		END
		PATCH_IF (npc_class = 1) BEGIN // mage
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
		END
		PATCH_IF (npc_class = 19) BEGIN // sorcerer
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_sckt~ END
		END
	END
  BUT_ONLY
END
//__________________________________________________________________________________

//compile the scripts and dialogues_________________________________________________
//
COMPILE ~npc_ee/d5fikit.d~
COMPILE ~npc_ee/d5pakit.d~
COMPILE ~npc_ee/d5rakit.d~
COMPILE ~npc_ee/d5thkit.d~
COMPILE ~npc_ee/d5bakit.d~
COMPILE ~npc_ee/d5clkit.d~
COMPILE ~npc_ee/d5drkit.d~
COMPILE ~npc_ee/d5shkit.d~
COMPILE ~npc_ee/d5mokit.d~
COMPILE ~npc_ee/d5makit.d~
COMPILE ~npc_ee/d5sokit.d~

COMPILE ~npc_ee/d5_sckit.baf~
//__________________________________________________________________________________


//add proficiency/specialization abilities__________________________________________
//
ACTION_DEFINE_ASSOCIATIVE_ARRAY d5_kits_profs BEGIN
MAGE , class				=> 	3
FIGHTER , class 			=> 	4
CLERIC , class 				=> 	5
THIEF , class 				=> 	6
BARD , class 				=> 	7
PALADIN , class 			=> 	8
DRUID , class 				=> 	9
RANGER , class 				=> 	10
FIGHTER_MAGE , class 		=> 	11
FIGHTER_CLERIC , class 		=> 	12
FIGHTER_THIEF , class 		=> 	13
FIGHTER_MAGE_THIEF , class 	=> 	14
MAGE_THIEF , class 			=> 	15
CLERIC_MAGE , class 		=> 	16
CLERIC_THIEF , class 		=> 	17
FIGHTER_DRUID , class 		=> 	18
FIGHTER_MAGE_CLERIC , class => 	19
CLERIC_RANGER , class 		=> 	20
MONK , class 				=> 	50
END

ACTION_IF (FILE_EXISTS_IN_GAME ~clabshgs.2da~) OR (FILE_EXISTS_IN_GAME ~clabsh01.2da~) BEGIN

  APPEND_OUTER ~npc_ee/files/d5profx.baf~ ~
IF
	NumTimesTalkedTo(0)
	Global("D5_PROFX","GLOBAL",0)
	Class(LastSummonerOf(Myself),SHAMAN)
	Kit(LastSummonerOf(Myself),TRUECLASS)
THEN
	RESPONSE #100
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_SHAMAN","LOCALS",1))
	SetGlobal("D5_PROFX","GLOBAL",1)
	SetNumTimesTalkedTo(1)
	ActionOverride(LastSummonerOf(Myself),StartDialogOverride("d5profx",Myself))
END
~ KEEP_CRLF

  OUTER_SPRINT $d5_kits_profs(~SHAMAN~ ~class~) ~59~

END

COPY_EXISTING ~kitlist.2da~ ~override~
  COUNT_2DA_COLS cols
  READ_2DA_ENTRIES_NOW ~r2en_kitlist~ cols
  FOR (row = 1; row < r2en_kitlist; row += 1) BEGIN
	READ_2DA_ENTRY_FORMER ~r2en_kitlist~ row 6 prof_col
	READ_2DA_ENTRY_FORMER ~r2en_kitlist~ row 9 kitids_num
	LOOKUP_IDS_SYMBOL_OF_INT kitids_name ~kit~ %kitids_num%
	SPRINT $d5_kits_profs(~%kitids_name%~ ~kit~) ~%prof_col%~
  END

ACTION_PHP_EACH d5_kits_profs AS kitidsname => profcol BEGIN
//  PRINT ~%kitidsname% = %kitidsname_1% = column %profcol%~
  ACTION_IF (~%kitidsname_1%~ STRING_EQUAL_CASE ~kit~) BEGIN
	APPEND_OUTER ~npc_ee/files/d5profx.baf~ ~
IF
	NumTimesTalkedTo(0)
	Global("D5_PROFX","GLOBAL",0)
	Kit(LastSummonerOf(Myself),%kitidsname%)
THEN
	RESPONSE #100
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	SetGlobal("D5_PROFX","GLOBAL",1)
	SetNumTimesTalkedTo(1)
	ActionOverride(LastSummonerOf(Myself),StartDialogOverride("d5profx",Myself))
END
~ KEEP_CRLF
  END
END

COPY_EXISTING ~weapprof.2da~ ~override~
	COUNT_2DA_COLS cols
	PHP_EACH d5_kits_profs AS kitidsname => profcol BEGIN
	  READ_2DA_ENTRY 8 (%profcol% + 1) cols bastard_sword_prof
	  READ_2DA_ENTRY 9 (%profcol% + 1) cols long_sword_prof
	  READ_2DA_ENTRY 10 (%profcol% + 1) cols short_sword_prof
	  READ_2DA_ENTRY 11 (%profcol% + 1) cols axe_prof
	  READ_2DA_ENTRY 12 (%profcol% + 1) cols greatsword_prof
	  READ_2DA_ENTRY 13 (%profcol% + 1) cols katana_prof
	  READ_2DA_ENTRY 14 (%profcol% + 1) cols scimitar_prof
	  READ_2DA_ENTRY 15 (%profcol% + 1) cols dagger_prof
	  READ_2DA_ENTRY 16 (%profcol% + 1) cols hammer_prof
	  READ_2DA_ENTRY 17 (%profcol% + 1) cols club_prof
	  READ_2DA_ENTRY 18 (%profcol% + 1) cols spear_prof
	  READ_2DA_ENTRY 19 (%profcol% + 1) cols halberd_prof
	  READ_2DA_ENTRY 20 (%profcol% + 1) cols flail_prof
	  READ_2DA_ENTRY 21 (%profcol% + 1) cols mace_prof
	  READ_2DA_ENTRY 22 (%profcol% + 1) cols staff_prof
	  READ_2DA_ENTRY 23 (%profcol% + 1) cols crossbow_prof
	  READ_2DA_ENTRY 24 (%profcol% + 1) cols long_bow_prof
	  READ_2DA_ENTRY 25 (%profcol% + 1) cols short_bow_prof
	  READ_2DA_ENTRY 26 (%profcol% + 1) cols dart_prof
	  READ_2DA_ENTRY 27 (%profcol% + 1) cols sling_prof
	  READ_2DA_ENTRY 28 (%profcol% + 1) cols two_hand_style
	  READ_2DA_ENTRY 29 (%profcol% + 1) cols shield_style
	  READ_2DA_ENTRY 30 (%profcol% + 1) cols single_weapon_style
	  READ_2DA_ENTRY 31 (%profcol% + 1) cols two_weapon_style
	  INNER_ACTION BEGIN
		COPY ~npc_ee/files/d5profx.baf~ ~npc_ee/files/d5profx.baf~
		  PATCH_IF (%two_weapon_style% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_TWO_WEAPON","LOCALS",%two_weapon_style%))~
		  END
		  PATCH_IF (%single_weapon_style% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_SINGLE_WEAPON","LOCALS",%single_weapon_style%))~
		  END
		  PATCH_IF (%shield_style% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_SHIELD","LOCALS",%shield_style%))~
		  END
		  PATCH_IF (%two_hand_style% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_TWO_HAND","LOCALS",%two_hand_style%))~
		  END
		  PATCH_IF (%sling_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_SLING","LOCALS",%sling_prof%))~
		  END
		  PATCH_IF (%dart_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_DART","LOCALS",%dart_prof%))~
		  END
		  PATCH_IF (%short_bow_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_SHORT_BOW","LOCALS",%short_bow_prof%))~
		  END
		  PATCH_IF (%long_bow_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_LONG_BOW","LOCALS",%long_bow_prof%))~
		  END
		  PATCH_IF (%crossbow_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_CROSSBOW","LOCALS",%crossbow_prof%))~
		  END
		  PATCH_IF (%staff_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_STAFF","LOCALS",%staff_prof%))~
		  END
		  PATCH_IF (%mace_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_MACE","LOCALS",%mace_prof%))~
		  END
		  PATCH_IF (%flail_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_FLAIL","LOCALS",%flail_prof%))~
		  END
		  PATCH_IF (%halberd_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_HALBERD","LOCALS",%halberd_prof%))~
		  END
		  PATCH_IF (%spear_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_SPEAR","LOCALS",%spear_prof%))~
		  END
		  PATCH_IF (%club_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_CLUB","LOCALS",%club_prof%))~
		  END
		  PATCH_IF (%hammer_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_HAMMER","LOCALS",%hammer_prof%))~
		  END
		  PATCH_IF (%dagger_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_DAGGER","LOCALS",%dagger_prof%))~
		  END
		  PATCH_IF (%scimitar_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_SCIMITAR","LOCALS",%scimitar_prof%))~
		  END
		  PATCH_IF (%katana_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_KATANA","LOCALS",%katana_prof%))~
		  END
		  PATCH_IF (%greatsword_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_GREATSWORD","LOCALS",%greatsword_prof%))~
		  END
		  PATCH_IF (%axe_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_AXE","LOCALS",%axe_prof%))~
		  END
		  PATCH_IF (%short_sword_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_SHORT_SWORD","LOCALS",%short_sword_prof%))~
		  END
		  PATCH_IF (%long_sword_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_LONG_SWORD","LOCALS",%long_sword_prof%))~
		  END
		  PATCH_IF (%bastard_sword_prof% > 0) BEGIN
			REPLACE_TEXTUALLY ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))~ ~	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_%kitidsname%","LOCALS",1))
	ActionOverride(LastSummonerOf(Myself),SetGlobal("D5_BASTARD_SWORD","LOCALS",%bastard_sword_prof%))~
		  END
	  END
	END
		  
  BUT_ONLY
  
APPEND_OUTER ~npc_ee/files/d5profx.baf~ ~
IF
	True()
THEN
	RESPONSE #100
	SetGlobal("D5_PROFX","GLOBAL",0)
	SetGlobal("D5_BASTARD_SWORD","LOCALS",0)
	SetGlobal("D5_LONG_SWORD","LOCALS",0)
	SetGlobal("D5_SHORT_SWORD","LOCALS",0)
	SetGlobal("D5_AXE","LOCALS",0)
	SetGlobal("D5_GREATSWORD","LOCALS",0)
	SetGlobal("D5_KATANA","LOCALS",0)
	SetGlobal("D5_SCIMITAR","LOCALS",0)
	SetGlobal("D5_DAGGER","LOCALS",0)
	SetGlobal("D5_HAMMER","LOCALS",0)
	SetGlobal("D5_CLUB","LOCALS",0)
	SetGlobal("D5_SPEAR","LOCALS",0)
	SetGlobal("D5_HALBERD","LOCALS",0)
	SetGlobal("D5_FLAIL","LOCALS",0)
	SetGlobal("D5_MACE","LOCALS",0)
	SetGlobal("D5_STAFF","LOCALS",0)
	SetGlobal("D5_CROSSBOW","LOCALS",0)
	SetGlobal("D5_LONG_BOW","LOCALS",0)
	SetGlobal("D5_SHORT_BOW","LOCALS",0)
	SetGlobal("D5_DART","LOCALS",0)
	SetGlobal("D5_SLING","LOCALS",0)
	SetGlobal("D5_TWO_HAND","LOCALS",0)
	SetGlobal("D5_SHIELD","LOCALS",0)
	SetGlobal("D5_SINGLE_WEAPON","LOCALS",0)
	SetGlobal("D5_TWO_WEAPON","LOCALS",0)
	SetNumTimesTalkedTo(0)
	DestroySelf()
END
~ KEEP_CRLF

COPY_EXISTING ~weapprof.2da~ ~override~
	COUNT_2DA_COLS cols
	READ_2DA_ENTRY 8 2 cols bastard_sword_name
	READ_2DA_ENTRY 8 3 cols bastard_sword_desc
	READ_2DA_ENTRY 9 2 cols long_sword_name
	READ_2DA_ENTRY 9 3 cols long_sword_desc
	READ_2DA_ENTRY 10 2 cols short_sword_name
	READ_2DA_ENTRY 10 3 cols short_sword_desc
	READ_2DA_ENTRY 11 2 cols axe_name
	READ_2DA_ENTRY 11 3 cols axe_desc
	READ_2DA_ENTRY 12 2 cols greatsword_name
	READ_2DA_ENTRY 12 3 cols greatsword_desc
	READ_2DA_ENTRY 13 2 cols katana_name
	READ_2DA_ENTRY 13 3 cols katana_desc
	READ_2DA_ENTRY 14 2 cols scimitar_name
	READ_2DA_ENTRY 14 3 cols scimitar_desc
	READ_2DA_ENTRY 15 2 cols dagger_name
	READ_2DA_ENTRY 15 3 cols dagger_desc
	READ_2DA_ENTRY 16 2 cols hammer_name
	READ_2DA_ENTRY 16 3 cols hammer_desc
	READ_2DA_ENTRY 18 2 cols spear_name
	READ_2DA_ENTRY 18 3 cols spear_desc
	READ_2DA_ENTRY 19 2 cols halberd_name
	READ_2DA_ENTRY 19 3 cols halberd_desc
	READ_2DA_ENTRY 20 2 cols flail_name
	READ_2DA_ENTRY 20 3 cols flail_desc
	READ_2DA_ENTRY 21 2 cols mace_name
	READ_2DA_ENTRY 21 3 cols mace_desc
	READ_2DA_ENTRY 17 2 cols club_name
	READ_2DA_ENTRY 17 3 cols club_desc
	READ_2DA_ENTRY 22 2 cols staff_name
	READ_2DA_ENTRY 22 3 cols staff_desc
	READ_2DA_ENTRY 23 2 cols crossbow_name
	READ_2DA_ENTRY 23 3 cols crossbow_desc
	READ_2DA_ENTRY 24 2 cols long_bow_name
	READ_2DA_ENTRY 24 3 cols long_bow_desc
	READ_2DA_ENTRY 25 2 cols short_bow_name
	READ_2DA_ENTRY 25 3 cols short_bow_desc
	READ_2DA_ENTRY 26 2 cols dart_name
	READ_2DA_ENTRY 26 3 cols dart_desc
	READ_2DA_ENTRY 27 2 cols sling_name
	READ_2DA_ENTRY 27 3 cols sling_desc
	READ_2DA_ENTRY 28 2 cols two_hand_name
	READ_2DA_ENTRY 28 3 cols two_hand_desc
	READ_2DA_ENTRY 29 2 cols shield_fighting_name
	READ_2DA_ENTRY 29 3 cols shield_fighting_desc
	READ_2DA_ENTRY 30 2 cols single_weapon_name
	READ_2DA_ENTRY 30 3 cols single_weapon_desc
	READ_2DA_ENTRY 31 2 cols two_weapon_name
	READ_2DA_ENTRY 31 3 cols two_weapon_desc

COPY ~npc_ee/files/d5profx.d~ ~npc_ee/files/d5profx.d~
	 ~npc_ee/files/d5profy.d~ ~npc_ee/files/d5profy.d~
	REPLACE_TEXTUALLY ~bastard_sword_name~ ~%bastard_sword_name%~
	REPLACE_TEXTUALLY ~bastard_sword_desc~ ~%bastard_sword_desc%~
	REPLACE_TEXTUALLY ~long_sword_name~ ~%long_sword_name%~
	REPLACE_TEXTUALLY ~long_sword_desc~ ~%long_sword_desc%~
	REPLACE_TEXTUALLY ~short_sword_name~ ~%short_sword_name%~
	REPLACE_TEXTUALLY ~short_sword_desc~ ~%short_sword_desc%~
	REPLACE_TEXTUALLY ~axe_name~ ~%axe_name%~
	REPLACE_TEXTUALLY ~axe_desc~ ~%axe_desc%~
	REPLACE_TEXTUALLY ~greatsword_name~ ~%greatsword_name%~
	REPLACE_TEXTUALLY ~greatsword_desc~ ~%greatsword_desc%~
	REPLACE_TEXTUALLY ~katana_name~ ~%katana_name%~
	REPLACE_TEXTUALLY ~katana_desc~ ~%katana_desc%~
	REPLACE_TEXTUALLY ~scimitar_name~ ~%scimitar_name%~
	REPLACE_TEXTUALLY ~scimitar_desc~ ~%scimitar_desc%~
	REPLACE_TEXTUALLY ~dagger_name~ ~%dagger_name%~
	REPLACE_TEXTUALLY ~dagger_desc~ ~%dagger_desc%~
	REPLACE_TEXTUALLY ~hammer_name~ ~%hammer_name%~
	REPLACE_TEXTUALLY ~hammer_desc~ ~%hammer_desc%~
	REPLACE_TEXTUALLY ~spear_name~ ~%spear_name%~
	REPLACE_TEXTUALLY ~spear_desc~ ~%spear_desc%~
	REPLACE_TEXTUALLY ~halberd_name~ ~%halberd_name%~
	REPLACE_TEXTUALLY ~halberd_desc~ ~%halberd_desc%~
	REPLACE_TEXTUALLY ~flail_name~ ~%flail_name%~
	REPLACE_TEXTUALLY ~flail_desc~ ~%flail_desc%~
	REPLACE_TEXTUALLY ~mace_name~ ~%mace_name%~
	REPLACE_TEXTUALLY ~mace_desc~ ~%mace_desc%~
	REPLACE_TEXTUALLY ~club_name~ ~%club_name%~
	REPLACE_TEXTUALLY ~club_desc~ ~%club_desc%~
	REPLACE_TEXTUALLY ~staff_name~ ~%staff_name%~
	REPLACE_TEXTUALLY ~staff_desc~ ~%staff_desc%~
	REPLACE_TEXTUALLY ~crossbow_name~ ~%crossbow_name%~
	REPLACE_TEXTUALLY ~crossbow_desc~ ~%crossbow_desc%~
	REPLACE_TEXTUALLY ~long_bow_name~ ~%long_bow_name%~
	REPLACE_TEXTUALLY ~long_bow_desc~ ~%long_bow_desc%~
	REPLACE_TEXTUALLY ~short_bow_name~ ~%short_bow_name%~
	REPLACE_TEXTUALLY ~short_bow_desc~ ~%short_bow_desc%~
	REPLACE_TEXTUALLY ~dart_name~ ~%dart_name%~
	REPLACE_TEXTUALLY ~dart_desc~ ~%dart_desc%~
	REPLACE_TEXTUALLY ~sling_name~ ~%sling_name%~
	REPLACE_TEXTUALLY ~sling_desc~ ~%sling_desc%~
	REPLACE_TEXTUALLY ~two_hand_name~ ~%two_hand_name%~
	REPLACE_TEXTUALLY ~two_hand_desc~ ~%two_hand_desc%~
	REPLACE_TEXTUALLY ~shield_fighting_name~ ~%shield_fighting_name%~
	REPLACE_TEXTUALLY ~shield_fighting_desc~ ~%shield_fighting_desc%~
	REPLACE_TEXTUALLY ~single_weapon_name~ ~%single_weapon_name%~
	REPLACE_TEXTUALLY ~single_weapon_desc~ ~%single_weapon_desc%~
	REPLACE_TEXTUALLY ~two_weapon_name~ ~%two_weapon_name%~
	REPLACE_TEXTUALLY ~two_weapon_desc~ ~%two_weapon_desc%~

COPY ~npc_ee/files/d51bswo.spl~ ~override~
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51lswo.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 90 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51sswo.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 91 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51baxe.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 92 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d512swo.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 93 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51kata.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 94 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51scim.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 95 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51dagg.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 96 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51hamm.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 97 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51spea.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 98 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51halb.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 99 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51flai.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 100 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51mace.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 101 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51club.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 115 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51staf.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 102 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51xbow.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 103 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51lbow.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 104 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51sbow.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 105 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51dart.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 106 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51slin.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 107 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51s2hw.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 111 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51ssns.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 112 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51ssws.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 113 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d51stwf.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter2 = 114 END

COPY ~npc_ee/files/d51bswo.spl~ ~override/d52bswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52lswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 90 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52sswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 91 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52baxe.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 92 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d522swo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 93 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52kata.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 94 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52scim.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 95 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52dagg.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 96 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52hamm.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 97 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52spea.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 98 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52halb.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 99 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52flai.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 100 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52mace.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 101 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52club.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 115 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52staf.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 102 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52xbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 103 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52lbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 104 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52sbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 105 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52dart.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 106 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52slin.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 107 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52s2hw.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 111 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52ssns.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 112 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52ssws.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 113 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d52stwf.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 2 parameter2 = 114 END

COPY ~npc_ee/files/d51bswo.spl~ ~override/d53bswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53lswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 90 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53sswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 91 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53baxe.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 92 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d532swo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 93 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53kata.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 94 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53scim.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 95 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53dagg.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 96 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53hamm.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 97 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53spea.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 98 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53halb.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 99 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53flai.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 100 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53mace.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 101 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53club.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 115 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53staf.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 102 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53xbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 103 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53lbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 104 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53sbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 105 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53dart.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 106 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53slin.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 107 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53s2hw.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 111 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53ssns.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 112 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53ssws.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 113 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d53stwf.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 3 parameter2 = 114 END

COPY ~npc_ee/files/d51bswo.spl~ ~override/d54bswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54lswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 90 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54sswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 91 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54baxe.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 92 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d542swo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 93 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54kata.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 94 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54scim.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 95 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54dagg.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 96 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54hamm.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 97 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54spea.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 98 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54halb.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 99 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54flai.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 100 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54mace.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 101 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54club.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 115 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54staf.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 102 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54xbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 103 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54lbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 104 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54sbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 105 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54dart.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 106 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54slin.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 107 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54s2hw.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 111 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54ssns.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 112 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54ssws.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 113 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d54stwf.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 4 parameter2 = 114 END

COPY ~npc_ee/files/d51bswo.spl~ ~override/d55bswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55lswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 90 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55sswo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 91 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55baxe.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 92 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d552swo.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 93 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55kata.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 94 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55scim.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 95 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55dagg.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 96 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55hamm.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 97 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55spea.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 98 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55halb.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 99 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55flai.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 100 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55mace.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 101 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55club.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 115 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55staf.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 102 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55xbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 103 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55lbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 104 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55sbow.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 105 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55dart.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 106 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55slin.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 107 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55s2hw.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 111 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55ssns.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 112 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55ssws.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 113 END
COPY ~npc_ee/files/d51bswo.spl~ ~override/d55stwf.spl~
	LPF ADD_SPELL_EFFECT INT_VAR insert_point = 0 opcode = 337 parameter2 = 328 parameter1 = 118 target = 1 timing = 1 END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 233 parameter1 = 5 parameter2 = 114 END

COMPILE ~npc_ee/files/d5profx.baf~

COMPILE ~npc_ee/files/d5profx.d~

COPY ~npc_ee/files/d5_profx.bam~ ~override~
COPY ~npc_ee/files/d5profx.eff~ ~override~
COPY ~npc_ee/files/d5profx.cre~ ~override~

COPY ~npc_ee/files/d5prof1.spl~ ~override~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxa~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override~
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxa~ END
COPY ~npc_ee/files/d5profa.spl~ ~override~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof2.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxb~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxb.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof2~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profb~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxb~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profb.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profb~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof3.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxc~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxc.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof3~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profc~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxc~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profc.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profc~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof4.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxd~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxd.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof4~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profd~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxd~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profd.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profd~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof5.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxe~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxe.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof5~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profe~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxe~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profe.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profe~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof6.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxf~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxf.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof6~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5proff~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxf~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5proff.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5proff~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof7.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxg~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxg.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof7~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profg~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxg~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profg.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profg~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof8.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxh~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxh.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof8~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profh~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxh~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profh.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profh~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof9.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxi~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxi.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof9~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profi~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxi~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profi.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profi~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof10.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxj~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxj.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof10~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profj~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxj~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profj.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profj~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof11.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxk~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxk.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof11~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profk~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxk~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profk.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profk~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof12.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxl~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxl.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof12~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profl~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxl~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profl.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profl~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof13.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxm~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxm.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof13~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profm~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxm~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profm.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profm~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof14.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxn~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxn.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof14~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profn~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxn~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profn.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profn~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof15.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxo~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxo.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof15~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profo~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxo~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profo.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profo~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof16.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxp~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxp.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof16~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profp~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxp~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profp.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profp~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof17.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxq~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxq.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof17~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profq~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxq~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profq.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profq~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof18.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxr~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxr.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof18~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profr~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxr~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profr.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profr~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof19.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxs~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxs.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof19~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5profs~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxs~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5profs.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5profs~ END
COPY ~npc_ee/files/d5prof1.spl~ ~override/d5prof20.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5profxt~ END
COPY ~npc_ee/files/d5profxa.spl~ ~override/d5profxt.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5prof20~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5proft~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5profxt~ END
COPY ~npc_ee/files/d5profa.spl~ ~override/d5proft.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profx~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5proft~ END

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_profs.d5~ BEGIN

 ACTION_FOR_EACH warrior_clab IN ~clabfi01~ ~clabpa01~ ~clabra01~ BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME ~%warrior_clab%.2da~ BEGIN
	APPEND ~%warrior_clab%.2da~ ~PROFS       AP_D5PROF1  ****        AP_D5PROF5  ****        ****        AP_D5PROF6  ****        ****        AP_D5PROF7  ****        ****        AP_D5PROF8  ****        ****        AP_D5PROF9  ****        ****        AP_D5PROF10 ****        ****        AP_D5PROF11 ****        ****        AP_D5PROF12 ****        ****        AP_D5PROF13 ****        ****        AP_D5PROF14 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
 END
 ACTION_IF FILE_EXISTS_IN_GAME ~clabra01.2da~ BEGIN
	APPEND ~clabra01.2da~ ~PROFS       AP_D52STWF  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
 END
 ACTION_FOR_EACH rogue_clab IN ~clabth01~ ~clabba01~ ~clabmo01~ BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME ~%rogue_clab%.2da~ BEGIN
	APPEND ~%rogue_clab%.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
 END
 ACTION_IF FILE_EXISTS_IN_GAME ~clabpr01.2da~ BEGIN
	APPEND ~clabpr01.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
 END
 ACTION_FOR_EACH druid_clab IN ~clabdr01~ ~clabsh01~ ~clabshgs~ BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME ~%druid_clab%.2da~ BEGIN
	APPEND ~%druid_clab%.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
 END
 ACTION_FOR_EACH mageclab IN ~clabma01~ ~clabma02~ ~clabma03~ ~clabma04~ ~clabma05~ ~clabma06~ ~clabma07~ ~clabma08~ ~clabma09~ BEGIN
  ACTION_IF NOT FILE_EXISTS_IN_GAME ~%mageclab%.2da~ BEGIN
    COPY ~npc_ee/files/%mageclab%.2da~ ~override~
  END 
 END
 APPEND ~clabma01.2da~ ~PROFS       AP_D5PROF1  ****        ****        ****        ****        AP_D5PROF2  ****        ****        ****        ****        ****        AP_D5PROF3  ****        ****        ****        ****        ****        AP_D5PROF4  ****        ****        ****        ****        ****        AP_D5PROF5  ****        ****        ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~

 COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS ~9~ "rows"
	FOR ( index = 2 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY %index% 5 9 modclab
		READ_2DA_ENTRY %index% 8 9 modclass
		DEFINE_ASSOCIATIVE_ARRAY d5_feat_array BEGIN "%modclab%" => "%modclass%" END
	END
 BUT_ONLY
 ACTION_PHP_EACH d5_feat_array AS fa => la BEGIN
  ACTION_IF (%la% = 2) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	fighter
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        AP_D5PROF5  ****        ****        AP_D5PROF6  ****        ****        AP_D5PROF7  ****        ****        AP_D5PROF8  ****        ****        AP_D5PROF9  ****        ****        AP_D5PROF10 ****        ****        AP_D5PROF11 ****        ****        AP_D5PROF12 ****        ****        AP_D5PROF13 ****        ****        AP_D5PROF14 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 6) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	paladin
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        AP_D5PROF5  ****        ****        AP_D5PROF6  ****        ****        AP_D5PROF7  ****        ****        AP_D5PROF8  ****        ****        AP_D5PROF9  ****        ****        AP_D5PROF10 ****        ****        AP_D5PROF11 ****        ****        AP_D5PROF12 ****        ****        AP_D5PROF13 ****        ****        AP_D5PROF14 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 12) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	ranger
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        AP_D5PROF5  ****        ****        AP_D5PROF6  ****        ****        AP_D5PROF7  ****        ****        AP_D5PROF8  ****        ****        AP_D5PROF9  ****        ****        AP_D5PROF10 ****        ****        AP_D5PROF11 ****        ****        AP_D5PROF12 ****        ****        AP_D5PROF13 ****        ****        AP_D5PROF14 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D52STWF  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 4) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	thief
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 5) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	bard
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 20) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	monk
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 3) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	cleric
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 11) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	druid
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 21) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	shaman
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        ****        AP_D5PROF3  ****        ****        ****        AP_D5PROF4  ****        ****        ****        AP_D5PROF5  ****        ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF (%la% = 1) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	mage
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        ****        ****        ****        AP_D5PROF2  ****        ****        ****        ****        ****        AP_D5PROF3  ****        ****        ****        ****        ****        AP_D5PROF4  ****        ****        ****        ****        ****        AP_D5PROF5  ****        ****        ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
  END
  ACTION_IF (%la% = 19) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	sorcerer
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PROF1  ****        ****        ****        ****        AP_D5PROF2  ****        ****        ****        ****        ****        AP_D5PROF3  ****        ****        ****        ****        ****        AP_D5PROF4  ****        ****        ****        ****        ****        AP_D5PROF5  ****        ****        ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        **** ~
  END
 END

END

ACTION_IF FILE_EXISTS_IN_GAME ~d5_profs.d5~ BEGIN

  ACTION_FOR_EACH old_prof_spell IN ~d5wepp1~
								~d5wepp1~
								~d5wepp2~
								~d5wepp3~
								~d5wepp4~
								~d5weps2~
								~d5wepx1~
								~d5wepx2~
								~d5wepx3~
								~d5wepx4~
								~d5wepx5~
  BEGIN
	ACTION_IF FILE_EXISTS_IN_GAME ~%old_prof_spell%.spl~ BEGIN
	  COPY_EXISTING ~%old_prof_spell%.spl~ ~override~
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = EVAL ~%old_prof_spell%~ END
	END
  END

  COPY ~npc_ee/files/d5_profy.bam~ ~override~
  COPY ~npc_ee/files/d5profy.eff~ ~override~
  COPY ~npc_ee/files/d5profy.cre~ ~override~
  COPY ~npc_ee/files/d5profwx.spl~ ~override~
//	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5profwx~ END
  COPY ~npc_ee/files/d5profrx.spl~ ~override~
//	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 206 STR_VAR resource = ~d5profrx~ END


  COPY ~npc_ee/files/d5profx.baf~ ~npc_ee/files/d5profy.baf~
	REPLACE_TEXTUALLY ~Global("D5_PROFX","GLOBAL",~ ~Global("D5_PROFY","GLOBAL",~
	REPLACE_TEXTUALLY ~StartDialogOverride("d5profx",Myself)~ ~StartDialogOverride("d5profy",Myself)~

  COMPILE ~npc_ee/files/d5profy.baf~

  COMPILE ~npc_ee/files/d5profy.d~

  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f1.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fya~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fya.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0fa~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fya~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0fa.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 177 STR_VAR resource = ~d5profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0fa~ END
  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f2.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fyb~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fyb.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0fb~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fyb~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0fb.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 177 STR_VAR resource = ~d5profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0fb~ END
  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f3.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fyc~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fyc.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0fc~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fyc~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0fc.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 177 STR_VAR resource = ~d5profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0fc~ END
  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f4.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fyd~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fyd.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0fd~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fyd~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0fd.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 177 STR_VAR resource = ~d5profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0fd~ END
  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f5.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fye~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fye.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0fe~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fye~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0fe.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 177 STR_VAR resource = ~d5profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0fe~ END
  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f6.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fyf~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fyf.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0ff~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fyf~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0ff.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 177 STR_VAR resource = ~d5profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0ff~ END
  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f7.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fyg~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fyg.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0fg~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fyg~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0fg.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 177 STR_VAR resource = ~d5profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0fg~ END
  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f8.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fyh~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fyh.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0fh~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fyh~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0fh.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 177 STR_VAR resource = ~d5profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0fh~ END
  COPY ~npc_ee/files/d5prof1.spl~ ~override/d5pr0f9.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 326 parameter2 = %profs_state% STR_VAR resource = ~d5pr0fyi~ END
  COPY ~npc_ee/files/d5profxa.spl~ ~override/d5pr0fyi.spl~
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 171 STR_VAR resource = ~d5pr0fi~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 206 target = 1 parameter1 = (0 - 1) timing = 9 STR_VAR resource = ~d5pr0fyi~ END
  COPY ~npc_ee/files/d5profa.spl~ ~override/d5pr0fi.spl~
	SAY NAME1 @2091
	SAY UNIDENTIFIED_DESC @2091
	WRITE_ASCII 0x3a ~d5_profx~ #8
	LPF ALTER_SPELL_HEADER STR_VAR icon = ~d5_profy~ END
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 172 STR_VAR resource = ~d5pr0fi~ END

  ACTION_FOR_EACH warrior_clab IN ~clabfi01~ ~clabpa01~ ~clabra01~ BEGIN
   ACTION_IF FILE_EXISTS_IN_GAME ~%warrior_clab%.2da~ BEGIN
	APPEND ~%warrior_clab%.2da~ ~PROFS       AP_D5PR0F1  ****        AP_D5PROF6  ****        ****        AP_D5PROF7  ****        ****        AP_D5PROF8  ****        ****        AP_D5PROF9  ****        ****        AP_D5PROF10 ****        ****        AP_D5PROF11 ****        ****        AP_D5PROF12 ****        ****        AP_D5PROF13 ****        ****        AP_D5PROF14 ****        ****        AP_D5PROF15 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F5  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROFWX ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
  END
  ACTION_IF FILE_EXISTS_IN_GAME ~clabra01.2da~ BEGIN
	APPEND ~clabra01.2da~ ~PROFS       AP_D52STWF  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_FOR_EACH rogue_clab IN ~clabth01~ ~clabba01~ BEGIN
   ACTION_IF FILE_EXISTS_IN_GAME ~%rogue_clab%.2da~ BEGIN
	APPEND ~%rogue_clab%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        AP_D5PROF11 ****        ****        ****        AP_D5PROF12 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROFRX ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
  END
  ACTION_IF FILE_EXISTS_IN_GAME ~clabmo01.2da~ BEGIN
	APPEND ~clabmo01.2da~ ~PROFS       AP_D5PR0F1  ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        AP_D5PROF11 ****        ****        ****        AP_D5PROF12 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF FILE_EXISTS_IN_GAME ~clabpr01.2da~ BEGIN
	APPEND ~clabpr01.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        AP_D5PROF7  ****        ****        ****        ****        AP_D5PROF8  ****        ****        ****        ****        AP_D5PROF9  ****        ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        AP_D5PROF11 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROF4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_IF FILE_EXISTS_IN_GAME ~clabdr01.2da~ BEGIN
	APPEND ~clabdr01.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        AP_D5PROF7  ****        ****        ****        ****        AP_D5PROF8  ****        ****        ****        ****        AP_D5PROF9  ****        ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        AP_D5PROF11 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
  END
  ACTION_FOR_EACH shaman_clab IN ~clabsh01~ ~clabshgs~ BEGIN
   ACTION_IF FILE_EXISTS_IN_GAME ~%shaman_clab%.2da~ BEGIN
	APPEND ~%shaman_clab%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        AP_D5PROF7  ****        ****        ****        ****        AP_D5PROF8  ****        ****        ****        ****        AP_D5PROF9  ****        ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        AP_D5PROF11 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
  END
  ACTION_FOR_EACH mageclab IN ~clabma01~ ~clabma02~ ~clabma03~ ~clabma04~ ~clabma05~ ~clabma06~ ~clabma07~ ~clabma08~ ~clabma09~ BEGIN
   ACTION_IF NOT FILE_EXISTS_IN_GAME ~%mageclab%.2da~ BEGIN
    COPY ~npc_ee/files/%mageclab%.2da~ ~override~
   END 
  END
  APPEND ~clabma01.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~

  COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS ~9~ "rows"
	FOR ( index = 2 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY %index% 5 9 modclab
		READ_2DA_ENTRY %index% 8 9 modclass
		DEFINE_ASSOCIATIVE_ARRAY d5_feat_array BEGIN "%modclab%" => "%modclass%" END
	END
  BUT_ONLY
  ACTION_PHP_EACH d5_feat_array AS fa => la BEGIN
   ACTION_IF (%la% = 2) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	fighter
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        AP_D5PROF6  ****        ****        AP_D5PROF7  ****        ****        AP_D5PROF8  ****        ****        AP_D5PROF9  ****        ****        AP_D5PROF10 ****        ****        AP_D5PROF11 ****        ****        AP_D5PROF12 ****        ****        AP_D5PROF13 ****        ****        AP_D5PROF14 ****        ****        AP_D5PROF15 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F5  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROFWX ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 6) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	paladin
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        AP_D5PROF6  ****        ****        AP_D5PROF7  ****        ****        AP_D5PROF8  ****        ****        AP_D5PROF9  ****        ****        AP_D5PROF10 ****        ****        AP_D5PROF11 ****        ****        AP_D5PROF12 ****        ****        AP_D5PROF13 ****        ****        AP_D5PROF14 ****        ****        AP_D5PROF15 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F5  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROFWX ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 12) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	ranger
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        AP_D5PROF6  ****        ****        AP_D5PROF7  ****        ****        AP_D5PROF8  ****        ****        AP_D5PROF9  ****        ****        AP_D5PROF10 ****        ****        AP_D5PROF11 ****        ****        AP_D5PROF12 ****        ****        AP_D5PROF13 ****        ****        AP_D5PROF14 ****        ****        AP_D5PROF15 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F5  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D52STWF  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROFWX ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 4) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	thief
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        AP_D5PROF11 ****        ****        ****        AP_D5PROF12 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROFRX ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 5) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	bard
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        AP_D5PROF11 ****        ****        ****        AP_D5PROF12 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PROFRX ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 20) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	monk
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        AP_D5PROF6  ****        ****        ****        AP_D5PROF7  ****        ****        ****        AP_D5PROF8  ****        ****        ****        AP_D5PROF9  ****        ****        ****        AP_D5PROF10 ****        ****        ****        AP_D5PROF11 ****        ****        ****        AP_D5PROF12 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 3) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	cleric
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        AP_D5PROF7  ****        ****        ****        ****        AP_D5PROF8  ****        ****        ****        ****        AP_D5PROF9  ****        ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        AP_D5PROF11 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 11) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	druid
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        AP_D5PROF7  ****        ****        ****        ****        AP_D5PROF8  ****        ****        ****        ****        AP_D5PROF9  ****        ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        AP_D5PROF11 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F4  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 21) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	shaman
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        AP_D5PROF6  ****        ****        ****        ****        AP_D5PROF7  ****        ****        ****        ****        AP_D5PROF8  ****        ****        ****        ****        AP_D5PROF9  ****        ****        ****        ****        AP_D5PROF10 ****        ****        ****        ****        AP_D5PROF11 ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 1) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	mage
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
   ACTION_IF (%la% = 19) AND (FILE_EXISTS_IN_GAME ~%fa%.2da~) BEGIN	//	sorcerer
	APPEND ~%fa%.2da~ ~PROFS       AP_D5PR0F1  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F2  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  
PROFS       AP_D5PR0F3  ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****        ****  ~
   END
  END
END

LAM JOINABLE_NPC_ARRAY

ACTION_PHP_EACH JOINABLE_NPC_ARRAY AS cre => dv BEGIN
  PRINT ~%cre% => %dv%~ 
  COPY_EXISTING ~%cre%~ ~override~
	LPF FJ_CRE_EFF_V2 END
END

ACTION_PHP_EACH JOINABLE_NPC_ARRAY AS cre => dv BEGIN
  COPY_EXISTING ~%cre%~ ~override~
	READ_LONG 0x2c4 eff_offset
	READ_LONG 0x2c8 eff_number
	WHILE (%eff_number% > 0) BEGIN
	  SET eff_number = (%eff_number% - 1)
	  READ_LONG (%eff_offset% + 0x08 + (0x108 * %eff_number%)) effect
	  PATCH_IF effect = 233 BEGIN
		WRITE_LONG (%eff_offset% + 0x88 + (0x108 * %eff_number%)) 1
		WRITE_ASCII (%eff_offset% + 0x8c + (0x108 * %eff_number%)) ~D5PROFZ~ #8
	  END
	END
END

// add INT-based profs if d5_profs.d5 is present

// make alternate .d file for if d5_profs.d5 is present

// then done!

//__________________________________________________________________________________

CLEAR_ARRAYS



//__________________________________________________________________________________
//__________________________________________________________________________________
//
//						INNATE ABILITIES FOR MULTICLASS
//__________________________________________________________________________________
//__________________________________________________________________________________


BEGIN @3000
DESIGNATED 3000
REQUIRE_COMPONENT ~npc_ee.tp2~ ~2000~ @1
//GROUP @6


//prep multiclass working folders___________________________________________________
//
COPY ~npc_ee/ma/d5dfile1.txt~ ~npc_ee/fm/d5dfile1.txt~ 
	REPLACE_TEXTUALLY ~d5makit~ ~d5fmkit~
COPY ~npc_ee/ma/d5dfile2.txt~ ~npc_ee/fm/d5dfile2.txt~ 
	REPLACE_TEXTUALLY ~d5makit~ ~d5fmkit~

COPY ~npc_ee/dr/d5dfile1.txt~ ~npc_ee/fd/d5dfile1.txt~ 
	REPLACE_TEXTUALLY ~d5drkit~ ~d5fdkit~
COPY ~npc_ee/dr/d5dfile2.txt~ ~npc_ee/fd/d5dfile2.txt~ 
	REPLACE_TEXTUALLY ~d5drkit~ ~d5fdkit~

COPY ~npc_ee/th/d5dfile1.txt~ ~npc_ee/ft/d5dfile1.txt~ 
	REPLACE_TEXTUALLY ~d5thkit~ ~d5ftkit~
COPY ~npc_ee/th/d5dfile2.txt~ ~npc_ee/ft/d5dfile2.txt~ 
	REPLACE_TEXTUALLY ~d5thkit~ ~d5ftkit~

COPY ~npc_ee/cl/d5dfile1.txt~ ~npc_ee/fc/d5dfile1.txt~ 
	REPLACE_TEXTUALLY ~d5clkit~ ~d5fckit~
COPY ~npc_ee/cl/d5dfile2.txt~ ~npc_ee/fc/d5dfile2.txt~ 
	REPLACE_TEXTUALLY ~d5clkit~ ~d5fckit~

COPY ~npc_ee/cl/d5dfile1.txt~ ~npc_ee/cm/d5dfile1.txt~ 
	REPLACE_TEXTUALLY ~d5clkit~ ~d5cmkit~
COPY ~npc_ee/cl/d5dfile2.txt~ ~npc_ee/cm/d5dfile2.txt~ 
	REPLACE_TEXTUALLY ~d5clkit~ ~d5cmkit~

COPY ~npc_ee/cl/d5dfile1.txt~ ~npc_ee/ct/d5dfile1.txt~ 
	REPLACE_TEXTUALLY ~d5clkit~ ~d5ctkit~
COPY ~npc_ee/cl/d5dfile2.txt~ ~npc_ee/ct/d5dfile2.txt~ 
	REPLACE_TEXTUALLY ~d5clkit~ ~d5ctkit~

COPY ~npc_ee/cl/d5dfile1.txt~ ~npc_ee/cr/d5dfile1.txt~ 
	REPLACE_TEXTUALLY ~d5clkit~ ~d5crkit~
COPY ~npc_ee/cl/d5dfile2.txt~ ~npc_ee/cr/d5dfile2.txt~ 
	REPLACE_TEXTUALLY ~d5clkit~ ~d5crkit~

COPY ~npc_ee/ma/d5dfile1.txt~ ~npc_ee/mt/d5dfile1.txt~ 
	REPLACE_TEXTUALLY ~d5makit~ ~d5mtkit~
COPY ~npc_ee/ma/d5dfile2.txt~ ~npc_ee/mt/d5dfile2.txt~ 
	REPLACE_TEXTUALLY ~d5makit~ ~d5mtkit~
//__________________________________________________________________________________


//find multiclass kits, build dialogue pieces_______________________________________
//
OUTER_SPRINT adopt_kit @2011
OUTER_SPRINT different_kit @2012

COPY_EXISTING ~kitlist.2da~ ~override~
	COUNT_2DA_ROWS ~10~ "rows"
	FOR ( index = 1 ; index < rows ; index = index + 1 ) BEGIN
		READ_2DA_ENTRY %index% 9 10 kit_code
		READ_2DA_ENTRY %index% 3 10 kit_name
		READ_2DA_ENTRY %index% 4 10 kit_desc
		READ_2DA_ENTRY %index% 8 10 kit_class
		DEFINE_ASSOCIATIVE_ARRAY d5_kits BEGIN "%kit_code%" , "%kit_name%" , "%kit_desc%" => "%kit_class%" END
	END
BUT_ONLY

OUTER_SET block_num = 0

ACTION_PHP_EACH d5_kits AS zoo => zu BEGIN
	OUTER_SET block_num = (%block_num% + 1)
	OUTER_PATCH foo BEGIN
		LOOKUP_IDS_SYMBOL_OF_INT ids_name ~kit~ %zoo%
	END
	ACTION_IF (%zu% = 7) BEGIN
		OUTER_TEXT_SPRINT class ~fm~
	END
	ACTION_IF (%zu% = 8) BEGIN
		OUTER_TEXT_SPRINT class ~fc~
	END
	ACTION_IF (%zu% = 9) BEGIN
		OUTER_TEXT_SPRINT class ~ft~
	END
	ACTION_IF (%zu% = 13) BEGIN
		OUTER_TEXT_SPRINT class ~mt~
	END
	ACTION_IF (%zu% = 14) BEGIN
		OUTER_TEXT_SPRINT class ~cm~
	END
	ACTION_IF (%zu% = 15) BEGIN
		OUTER_TEXT_SPRINT class ~ct~
	END
	ACTION_IF (%zu% = 16) BEGIN
		OUTER_TEXT_SPRINT class ~fd~
	END
	ACTION_IF (%zu% = 18) BEGIN
		OUTER_TEXT_SPRINT class ~cr~
	END
	ACTION_IF (%zu% = 1) OR (%zu% = 2) OR (%zu% = 3) OR (%zu% = 4) OR (%zu% = 5) OR (%zu% = 6) OR (%zu% = 11) OR (%zu% = 12) OR (%zu% = 19) OR (%zu% = 20) OR (%zu% = 21) BEGIN
		OUTER_TEXT_SPRINT class ~dummy~
	END
	ACTION_GET_STRREF EVAL %zoo_1% ~name_string~
	ACTION_GET_STRREF EVAL %zoo_2% ~desc_string~
	APPEND_OUTER ~npc_ee/%class%/d5dfile1.txt~ "IF ~~ THEN REPLY ~%name_string%~ GOTO d5%class%kit_%block_num%" KEEP_CRLF
	APPEND_OUTER ~npc_ee/%class%/d5dfile2.txt~ "IF ~~ THEN BEGIN d5%class%kit_%block_num% %WNL% SAY ~%desc_string%~ %WNL% IF ~~ THEN REPLY ~%adopt_kit%~ DO ~AddKit(%ids_name%)~ EXIT %WNL% IF ~~ THEN REPLY ~%different_kit%~ GOTO d5%class%kit %WNL% END %WNL%" KEEP_CRLF
END
//__________________________________________________________________________________

//patch together multiclass dialogues_______________________________________________
//
COPY ~npc_ee/fc/d5fckit.d~ ~npc_ee/d5fckit.d~
	APPEND_FILE ~npc_ee/fc/d5dfile1.txt~
	APPEND_FILE ~npc_ee/fc/d5dfile2.txt~

COPY ~npc_ee/fd/d5fdkit.d~ ~npc_ee/d5fdkit.d~
	APPEND_FILE ~npc_ee/fd/d5dfile1.txt~
	APPEND_FILE ~npc_ee/fd/d5dfile2.txt~

COPY ~npc_ee/fm/d5fmkit.d~ ~npc_ee/d5fmkit.d~
	APPEND_FILE ~npc_ee/fm/d5dfile1.txt~
	APPEND_FILE ~npc_ee/fm/d5dfile2.txt~

COPY ~npc_ee/ft/d5ftkit.d~ ~npc_ee/d5ftkit.d~
	APPEND_FILE ~npc_ee/ft/d5dfile1.txt~
	APPEND_FILE ~npc_ee/ft/d5dfile2.txt~

COPY ~npc_ee/cm/d5cmkit.d~ ~npc_ee/d5cmkit.d~
	APPEND_FILE ~npc_ee/cm/d5dfile1.txt~
	APPEND_FILE ~npc_ee/cm/d5dfile2.txt~

COPY ~npc_ee/cr/d5crkit.d~ ~npc_ee/d5crkit.d~
	APPEND_FILE ~npc_ee/cr/d5dfile1.txt~
	APPEND_FILE ~npc_ee/cr/d5dfile2.txt~

COPY ~npc_ee/ct/d5ctkit.d~ ~npc_ee/d5ctkit.d~
	APPEND_FILE ~npc_ee/ct/d5dfile1.txt~
	APPEND_FILE ~npc_ee/ct/d5dfile2.txt~

COPY ~npc_ee/mt/d5mtkit.d~ ~npc_ee/d5mtkit.d~
	APPEND_FILE ~npc_ee/mt/d5dfile1.txt~
	APPEND_FILE ~npc_ee/mt/d5dfile2.txt~
//__________________________________________________________________________________

//copy multiclass abilities and invisicres into game________________________________
//
COPY_EXISTING ~splprot.2da~ ~override~
	COUNT_2DA_COLS cols // amount of columns
	READ_2DA_ENTRIES_NOW rows cols // read all file into memory  
	FOR (row = 1; row < rows; ++row) BEGIN // iterate over rows
	  READ_2DA_ENTRY_FORMER rows row 0 ~stat~ // read column value
	  PATCH_IF ~%stat%~ STRING_EQUAL_CASE ~D5_PROFS_STATE~ BEGIN
		READ_2DA_ENTRY_FORMER rows row 2 new_profs_state // read column value
	    SET profs_state = %row%
	  END
	END
BUT_ONLY
COPY ~npc_ee/spl/d5_mckt.spl~ ~override~
	SAY NAME1 @11
	SAY UNIDENTIFIED_DESC @11
	LPF ALTER_EFFECT INT_VAR silent = 1 match_opcode = 328 parameter2 = %new_profs_state% END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5profz~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 321 target = 1 timing = 9 STR_VAR resource = ~d5profz~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5weppa~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5weppb~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5weppc~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5weppd~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5wepsa~ END
	LPF ADD_SPELL_EFFECT INT_VAR opcode = 172 target = 1 timing = 9 STR_VAR resource = ~d5wepsb~ END
	PATCH_FOR_EACH d5_prof_level IN ~p~ ~s~ ~m~ ~h~ BEGIN
	  PATCH_FOR_EACH d5_prof_wep IN ~lswo~ ~sswo~ ~dagg~ ~scim~ ~2swo~ ~spea~ ~staf~ ~club~ ~flai~ ~hamm~ ~baxe~ ~bows~ ~slin~ ~xbow~ ~s2hw~ ~ssws~ ~ssns~ ~sdw~ BEGIN
		LPF ADD_SPELL_EFFECT INT_VAR opcode = 321 target = 1 timing = 9 STR_VAR resource = EVAL ~d5%d5_prof_level%%d5_prof_wep%~ END
	  END
	END
COPY ~npc_ee/cre/d5_mckit.cre~ ~override~
//__________________________________________________________________________________

//compile mc scripts and dialogues__________________________________________________
//
COMPILE ~npc_ee/d5fckit.d~
COMPILE ~npc_ee/d5fdkit.d~
COMPILE ~npc_ee/d5fmkit.d~
COMPILE ~npc_ee/d5ftkit.d~
COMPILE ~npc_ee/d5cmkit.d~
COMPILE ~npc_ee/d5crkit.d~
COMPILE ~npc_ee/d5ctkit.d~
COMPILE ~npc_ee/d5mtkit.d~

COMPILE ~npc_ee/d5_mckit.baf~
//__________________________________________________________________________________

//add innate abilities to multiclass NPCs___________________________________________
//
LAM JOINABLE_NPC_ARRAY

ACTION_PHP_EACH JOINABLE_NPC_ARRAY AS cre => dv BEGIN
  PRINT ~%cre% => %dv%~ 
  COPY_EXISTING ~%cre%~ ~override~
	PATCH_IF (SOURCE_SIZE > 0x2d3) BEGIN
		READ_BYTE 0x273 npc_class
		PATCH_IF (%npc_class% = 7) BEGIN // fighter/mage
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
		PATCH_IF (%npc_class% = 8) BEGIN // fighter/cleric
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
		PATCH_IF (%npc_class% = 9) BEGIN // fighter/thief
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
		PATCH_IF (%npc_class% = 10) BEGIN // fighter/mage/thief
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
		PATCH_IF (%npc_class% = 13) BEGIN // mage/thief
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
		PATCH_IF (%npc_class% = 14) BEGIN // cleric/mage
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
		PATCH_IF (%npc_class% = 15) BEGIN // cleric/thief
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
		PATCH_IF (%npc_class% = 16) BEGIN // fighter/druid
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
//		PATCH_IF (%npc_class% = 17) BEGIN // fighter/mage/cleric
//			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
//		END
		PATCH_IF (%npc_class% = 18) BEGIN // cleric/ranger
			LPF ADD_CRE_EFFECT INT_VAR opcode=171 target=1 timing=9 power=1 STR_VAR resource=~d5_mckt~ END
		END
	END
  BUT_ONLY
END
//__________________________________________________________________________________

//INNATE ABILITIES FOR MULTICLASS PC________________________________________________
//
COPY ~npc_ee/pc/d5_gckt.spl~ ~override~
COPY ~npc_ee/pc/d5_gfkt.spl~ ~override~
COPY ~npc_ee/pc/d5_gtkt.spl~ ~override~
COPY ~npc_ee/pc/d5_clkt.eff~ ~override~
COPY ~npc_ee/pc/d5_cmkt.eff~ ~override~
COPY ~npc_ee/pc/d5_crkt.eff~ ~override~
COPY ~npc_ee/pc/d5_ctkt.eff~ ~override~
COPY ~npc_ee/pc/d5_fikt.eff~ ~override~
COPY ~npc_ee/pc/d5_fckt.eff~ ~override~
COPY ~npc_ee/pc/d5_fdkt.eff~ ~override~
COPY ~npc_ee/pc/d5_fmkt.eff~ ~override~
COPY ~npc_ee/pc/d5_ftkt.eff~ ~override~
COPY ~npc_ee/pc/d5_rakt.eff~ ~override~
COPY ~npc_ee/pc/d5_thkt.eff~ ~override~
COPY ~npc_ee/pc/d5_mtkt.eff~ ~override~

ACTION_IF NOT FILE_EXISTS_IN_GAME ~d5_deity.d5~ BEGIN
  ACTION_IF FILE_EXISTS_IN_GAME ~clabpr01.2da~ BEGIN
	COPY_EXISTING ~clabpr01.2da~ ~override~
		APPEND_FILE ~npc_ee/pc/cleric_kit_choice.txt~
	BUT_ONLY
  END
END
ACTION_IF FILE_EXISTS_IN_GAME ~clabfi01.2da~ BEGIN
	COPY_EXISTING ~clabfi01.2da~ ~override~
		APPEND_FILE ~npc_ee/pc/fighter_kit_choice.txt~
	BUT_ONLY
END
ACTION_IF FILE_EXISTS_IN_GAME ~clabth01.2da~ BEGIN
	COPY_EXISTING ~clabth01.2da~ ~override~
		APPEND_FILE ~npc_ee/pc/thief_kit_choice.txt~
	BUT_ONLY
END
//__________________________________________________________________________________

CLEAR_ARRAYS


